/*! For license information please see index.70f1ba97275a7d87da35.js.LICENSE.txt */
var index;(()=>{var t={1924:(t,e,r)=>{"use strict";var o=r(210),n=r(5559),i=n(o("String.prototype.indexOf"));t.exports=function(t,e){var r=o(t,!!e);return"function"==typeof r&&i(t,".prototype.")>-1?n(r):r}},5559:(t,e,r)=>{"use strict";var o=r(8612),n=r(210),i=n("%Function.prototype.apply%"),s=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||o.call(s,i),l=n("%Object.getOwnPropertyDescriptor%",!0),c=n("%Object.defineProperty%",!0),u=n("%Math.max%");if(c)try{c({},"a",{value:1})}catch(t){c=null}t.exports=function(t){var e=a(o,s,arguments);if(l&&c){var r=l(e,"length");r.configurable&&c(e,"length",{value:1+u(0,t.length-(arguments.length-1))})}return e};var d=function(){return a(o,i,arguments)};c?c(t.exports,"apply",{value:d}):t.exports.apply=d},1227:(t,e,r)=>{var o=r(4155);e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;e.splice(1,0,r,"color: inherit");let o=0,n=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(o++,"%c"===t&&(n=o))})),e.splice(n,0,r)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&void 0!==o&&"env"in o&&(t=o.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=r(2447)(e);const{formatters:n}=t.exports;n.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},2447:(t,e,r)=>{t.exports=function(t){function e(t){let r,n,i,s=null;function a(...t){if(!a.enabled)return;const o=a,n=Number(new Date),i=n-(r||n);o.diff=i,o.prev=r,o.curr=n,r=n,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let s=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((r,n)=>{if("%%"===r)return"%";s++;const i=e.formatters[n];if("function"==typeof i){const e=t[s];r=i.call(o,e),t.splice(s,1),s--}return r})),e.formatArgs.call(o,t);(o.log||e.log).apply(o,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=o,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(n!==e.namespaces&&(n=e.namespaces,i=e.enabled(t)),i),set:t=>{s=t}}),"function"==typeof e.init&&e.init(a),a}function o(t,r){const o=e(this.namespace+(void 0===r?":":r)+t);return o.log=this.log,o}function n(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},e.disable=function(){const t=[...e.names.map(n),...e.skips.map(n).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let r;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const o=("string"==typeof t?t:"").split(/[\s,]+/),n=o.length;for(r=0;r<n;r++)o[r]&&("-"===(t=o[r].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.slice(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let r,o;for(r=0,o=e.skips.length;r<o;r++)if(e.skips[r].test(t))return!1;for(r=0,o=e.names.length;r<o;r++)if(e.names[r].test(t))return!0;return!1},e.humanize=r(7824),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((r=>{e[r]=t[r]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let r=0;for(let e=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e),r|=0;return e.colors[Math.abs(r)%e.colors.length]},e.enable(e.load()),e}},4029:(t,e,r)=>{"use strict";var o=r(5320),n=Object.prototype.toString,i=Object.prototype.hasOwnProperty,s=function(t,e,r){for(var o=0,n=t.length;o<n;o++)i.call(t,o)&&(null==r?e(t[o],o,t):e.call(r,t[o],o,t))},a=function(t,e,r){for(var o=0,n=t.length;o<n;o++)null==r?e(t.charAt(o),o,t):e.call(r,t.charAt(o),o,t)},l=function(t,e,r){for(var o in t)i.call(t,o)&&(null==r?e(t[o],o,t):e.call(r,t[o],o,t))};t.exports=function(t,e,r){if(!o(e))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=r),"[object Array]"===n.call(t)?s(t,e,i):"string"==typeof t?a(t,e,i):l(t,e,i)}},7648:t=>{"use strict";var e="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,o=Object.prototype.toString,n="[object Function]";t.exports=function(t){var i=this;if("function"!=typeof i||o.call(i)!==n)throw new TypeError(e+i);for(var s,a=r.call(arguments,1),l=function(){if(this instanceof s){var e=i.apply(this,a.concat(r.call(arguments)));return Object(e)===e?e:this}return i.apply(t,a.concat(r.call(arguments)))},c=Math.max(0,i.length-a.length),u=[],d=0;d<c;d++)u.push("$"+d);if(s=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(l),i.prototype){var p=function(){};p.prototype=i.prototype,s.prototype=new p,p.prototype=null}return s}},8612:(t,e,r)=>{"use strict";var o=r(7648);t.exports=Function.prototype.bind||o},210:(t,e,r)=>{"use strict";var o,n=SyntaxError,i=Function,s=TypeError,a=function(t){try{return i('"use strict"; return ('+t+").constructor;")()}catch(t){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(t){l=null}var c=function(){throw new s},u=l?function(){try{return c}catch(t){try{return l(arguments,"callee").get}catch(t){return c}}}():c,d=r(1405)(),p=Object.getPrototypeOf||function(t){return t.__proto__},h={},f="undefined"==typeof Uint8Array?o:p(Uint8Array),y={"%AggregateError%":"undefined"==typeof AggregateError?o:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?o:ArrayBuffer,"%ArrayIteratorPrototype%":d?p([][Symbol.iterator]()):o,"%AsyncFromSyncIteratorPrototype%":o,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":"undefined"==typeof Atomics?o:Atomics,"%BigInt%":"undefined"==typeof BigInt?o:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?o:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?o:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?o:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?o:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":h,"%Int8Array%":"undefined"==typeof Int8Array?o:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?o:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?o:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d?p(p([][Symbol.iterator]())):o,"%JSON%":"object"==typeof JSON?JSON:o,"%Map%":"undefined"==typeof Map?o:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&d?p((new Map)[Symbol.iterator]()):o,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?o:Promise,"%Proxy%":"undefined"==typeof Proxy?o:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?o:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?o:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&d?p((new Set)[Symbol.iterator]()):o,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?o:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d?p(""[Symbol.iterator]()):o,"%Symbol%":d?Symbol:o,"%SyntaxError%":n,"%ThrowTypeError%":u,"%TypedArray%":f,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?o:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?o:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?o:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?o:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?o:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?o:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?o:WeakSet},g=function t(e){var r;if("%AsyncFunction%"===e)r=a("async function () {}");else if("%GeneratorFunction%"===e)r=a("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=a("async function* () {}");else if("%AsyncGenerator%"===e){var o=t("%AsyncGeneratorFunction%");o&&(r=o.prototype)}else if("%AsyncIteratorPrototype%"===e){var n=t("%AsyncGenerator%");n&&(r=p(n.prototype))}return y[e]=r,r},v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},_=r(8612),m=r(7642),b=_.call(Function.call,Array.prototype.concat),w=_.call(Function.apply,Array.prototype.splice),P=_.call(Function.call,String.prototype.replace),S=_.call(Function.call,String.prototype.slice),A=_.call(Function.call,RegExp.prototype.exec),C=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,O=/\\(\\)?/g,x=function(t){var e=S(t,0,1),r=S(t,-1);if("%"===e&&"%"!==r)throw new n("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new n("invalid intrinsic syntax, expected opening `%`");var o=[];return P(t,C,(function(t,e,r,n){o[o.length]=r?P(n,O,"$1"):e||t})),o},E=function(t,e){var r,o=t;if(m(v,o)&&(o="%"+(r=v[o])[0]+"%"),m(y,o)){var i=y[o];if(i===h&&(i=g(o)),void 0===i&&!e)throw new s("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:o,value:i}}throw new n("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new s('"allowMissing" argument must be a boolean');if(null===A(/^%?[^%]*%?$/,t))throw new n("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=x(t),o=r.length>0?r[0]:"",i=E("%"+o+"%",e),a=i.name,c=i.value,u=!1,d=i.alias;d&&(o=d[0],w(r,b([0,1],d)));for(var p=1,h=!0;p<r.length;p+=1){var f=r[p],g=S(f,0,1),v=S(f,-1);if(('"'===g||"'"===g||"`"===g||'"'===v||"'"===v||"`"===v)&&g!==v)throw new n("property names with quotes must have matching quotes");if("constructor"!==f&&h||(u=!0),m(y,a="%"+(o+="."+f)+"%"))c=y[a];else if(null!=c){if(!(f in c)){if(!e)throw new s("base intrinsic for "+t+" exists, but the property is not available.");return}if(l&&p+1>=r.length){var _=l(c,f);c=(h=!!_)&&"get"in _&&!("originalValue"in _.get)?_.get:c[f]}else h=m(c,f),c=c[f];h&&!u&&(y[a]=c)}}return c}},7296:(t,e,r)=>{"use strict";var o=r(210)("%Object.getOwnPropertyDescriptor%",!0);if(o)try{o([],"length")}catch(t){o=null}t.exports=o},1405:(t,e,r)=>{"use strict";var o="undefined"!=typeof Symbol&&Symbol,n=r(5419);t.exports=function(){return"function"==typeof o&&("function"==typeof Symbol&&("symbol"==typeof o("foo")&&("symbol"==typeof Symbol("bar")&&n())))}},5419:t=>{"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var o=Object.getOwnPropertySymbols(t);if(1!==o.length||o[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(t,e);if(42!==n.value||!0!==n.enumerable)return!1}return!0}},6410:(t,e,r)=>{"use strict";var o=r(5419);t.exports=function(){return o()&&!!Symbol.toStringTag}},7642:(t,e,r)=>{"use strict";var o=r(8612);t.exports=o.call(Function.call,Object.prototype.hasOwnProperty)},5717:t=>{"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},2584:(t,e,r)=>{"use strict";var o=r(6410)(),n=r(1924)("Object.prototype.toString"),i=function(t){return!(o&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===n(t)},s=function(t){return!!i(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==n(t)&&"[object Function]"===n(t.callee)},a=function(){return i(arguments)}();i.isLegacyArguments=s,t.exports=a?i:s},5320:t=>{"use strict";var e,r,o=Function.prototype.toString,n="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof n&&"function"==typeof Object.defineProperty)try{e=Object.defineProperty({},"length",{get:function(){throw r}}),r={},n((function(){throw 42}),null,e)}catch(t){t!==r&&(n=null)}else n=null;var i=/^\s*class\b/,s=function(t){try{var e=o.call(t);return i.test(e)}catch(t){return!1}},a=function(t){try{return!s(t)&&(o.call(t),!0)}catch(t){return!1}},l=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,u=!(0 in[,]),d=function(){return!1};if("object"==typeof document){var p=document.all;l.call(p)===l.call(document.all)&&(d=function(t){if((u||!t)&&(void 0===t||"object"==typeof t))try{var e=l.call(t);return("[object HTMLAllCollection]"===e||"[object HTML document.all class]"===e||"[object HTMLCollection]"===e||"[object Object]"===e)&&null==t("")}catch(t){}return!1})}t.exports=n?function(t){if(d(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;try{n(t,null,e)}catch(t){if(t!==r)return!1}return!s(t)&&a(t)}:function(t){if(d(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(c)return a(t);if(s(t))return!1;var e=l.call(t);return!("[object Function]"!==e&&"[object GeneratorFunction]"!==e&&!/^\[object HTML/.test(e))&&a(t)}},8662:(t,e,r)=>{"use strict";var o,n=Object.prototype.toString,i=Function.prototype.toString,s=/^\s*(?:function)?\*/,a=r(6410)(),l=Object.getPrototypeOf;t.exports=function(t){if("function"!=typeof t)return!1;if(s.test(i.call(t)))return!0;if(!a)return"[object GeneratorFunction]"===n.call(t);if(!l)return!1;if(void 0===o){var e=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch(t){}}();o=!!e&&l(e)}return l(t)===o}},5692:(t,e,r)=>{"use strict";var o=r(4029),n=r(3083),i=r(1924),s=i("Object.prototype.toString"),a=r(6410)(),l=r(7296),c="undefined"==typeof globalThis?r.g:globalThis,u=n(),d=i("Array.prototype.indexOf",!0)||function(t,e){for(var r=0;r<t.length;r+=1)if(t[r]===e)return r;return-1},p=i("String.prototype.slice"),h={},f=Object.getPrototypeOf;a&&l&&f&&o(u,(function(t){var e=new c[t];if(Symbol.toStringTag in e){var r=f(e),o=l(r,Symbol.toStringTag);if(!o){var n=f(r);o=l(n,Symbol.toStringTag)}h[t]=o.get}}));t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!a||!(Symbol.toStringTag in t)){var e=p(s(t),8,-1);return d(u,e)>-1}return!!l&&function(t){var e=!1;return o(h,(function(r,o){if(!e)try{e=r.call(t)===o}catch(t){}})),e}(t)}},365:(t,e,r)=>{"use strict";r.r(e)},7824:t=>{var e=1e3,r=60*e,o=60*r,n=24*o,i=7*n,s=365.25*n;function a(t,e,r,o){var n=e>=1.5*r;return Math.round(t/r)+" "+o+(n?"s":"")}t.exports=function(t,l){l=l||{};var c=typeof t;if("string"===c&&t.length>0)return function(t){if((t=String(t)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!a)return;var l=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*s;case"weeks":case"week":case"w":return l*i;case"days":case"day":case"d":return l*n;case"hours":case"hour":case"hrs":case"hr":case"h":return l*o;case"minutes":case"minute":case"mins":case"min":case"m":return l*r;case"seconds":case"second":case"secs":case"sec":case"s":return l*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(t);if("number"===c&&isFinite(t))return l.long?function(t){var i=Math.abs(t);if(i>=n)return a(t,i,n,"day");if(i>=o)return a(t,i,o,"hour");if(i>=r)return a(t,i,r,"minute");if(i>=e)return a(t,i,e,"second");return t+" ms"}(t):function(t){var i=Math.abs(t);if(i>=n)return Math.round(t/n)+"d";if(i>=o)return Math.round(t/o)+"h";if(i>=r)return Math.round(t/r)+"m";if(i>=e)return Math.round(t/e)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},4155:t=>{var e,r,o=t.exports={};function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===n||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(r){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:n}catch(t){e=n}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(t){r=i}}();var a,l=[],c=!1,u=-1;function d(){c&&a&&(c=!1,a.length?l=a.concat(l):u=-1,l.length&&p())}function p(){if(!c){var t=s(d);c=!0;for(var e=l.length;e;){for(a=l,l=[];++u<e;)a&&a[u].run();u=-1,e=l.length}a=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function f(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new h(t,e)),1!==l.length||c||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=f,o.addListener=f,o.once=f,o.off=f,o.removeListener=f,o.removeAllListeners=f,o.emit=f,o.prependListener=f,o.prependOnceListener=f,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},9475:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Encrypted=void 0;const o=r(655),n=r(8850);let i=class{constructor(){this.DecryptedLengthBeforeInflate=-1,this.CypherBlockPadding=-1}get OriginalLength(){return void 0!==this.OriginalLength2?this.OriginalLength2:this.OriginalLength1}set OriginalLength(t){void 0!==t&&(this.OriginalLength1=void 0,this.OriginalLength2=t)}};o.__decorate([(0,n.JsonProperty)("scheme"),o.__metadata("design:type",String)],i.prototype,"Scheme",void 0),o.__decorate([(0,n.JsonProperty)("profile"),o.__metadata("design:type",String)],i.prototype,"Profile",void 0),o.__decorate([(0,n.JsonProperty)("algorithm"),o.__metadata("design:type",String)],i.prototype,"Algorithm",void 0),o.__decorate([(0,n.JsonProperty)("compression"),o.__metadata("design:type",String)],i.prototype,"Compression",void 0),o.__decorate([(0,n.JsonProperty)("originalLength"),o.__metadata("design:type",Number)],i.prototype,"OriginalLength2",void 0),o.__decorate([(0,n.JsonProperty)("original-length"),o.__metadata("design:type",Object)],i.prototype,"OriginalLength1",void 0),i=o.__decorate([(0,n.JsonObject)()],i),e.Encrypted=i},4555:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaJsonSerialize=e.TaJsonDeserialize=e.KeyToPreserveUnknownJSON=void 0;const o=r(8850);e.KeyToPreserveUnknownJSON="AdditionalJSON",e.TaJsonDeserialize=function(t,r){return o.JSON.deserialize(t,r,{keyToPreserveUnknownJSON:e.KeyToPreserveUnknownJSON})},e.TaJsonSerialize=function(t){return o.JSON.serialize(t,{keyToPreserveUnknownJSON:e.KeyToPreserveUnknownJSON})}},1649:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tryDecodeURI=void 0,e.tryDecodeURI=function(t){if(!t)return null;try{return decodeURIComponent(t)}catch(e){console.log(t),console.log(e)}return t}},1969:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Publication=void 0;var o=r(6e3);Object.defineProperty(e,"Publication",{enumerable:!0,get:function(){return o.Publication}})},2493:(t,e,r)=>{"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),e.MediaOverlayNode=e.timeStrToSeconds=void 0;const n=r(655),i=r(8850),s=r(3536);e.timeStrToSeconds=function(t){if(!t)return 0;t=t.replace("npt=","");let e=0,r=0,o=0;try{const n=t.indexOf("min");if(n>0){const e=t.substr(0,n);r=parseFloat(e)}else{const n=t.indexOf("ms");if(n>0){const e=t.substr(0,n);o=parseFloat(e)/1e3}else{const n=t.indexOf("s");if(n>0){const e=t.substr(0,n);o=parseFloat(e)}else{const n=t.indexOf("h");if(n>0){const r=t.substr(0,n);e=parseFloat(r)}else{const n=t.split(":");1===n.length?o=parseFloat(n[0]):2===n.length?(r=parseFloat(n[0]),o=parseFloat(n[1])):3===n.length?(e=parseFloat(n[0]),r=parseFloat(n[1]),o=parseFloat(n[2])):(console.log("SMIL TIME CLOCK SYNTAX PARSING ERROR ??"),console.log(t))}}}}}catch(e){return console.log(e),console.log("SMIL TIME CLOCK SYNTAX PARSING ERROR!"),console.log(t),0}return 3600*e+60*r+o};let a=o=class{constructor(){this.initialized=!1}};n.__decorate([(0,i.JsonProperty)("text"),n.__metadata("design:type",String)],a.prototype,"Text",void 0),n.__decorate([(0,i.JsonProperty)("audio"),n.__metadata("design:type",String)],a.prototype,"Audio",void 0),n.__decorate([(0,i.JsonProperty)("role"),(0,i.JsonConverter)(s.JsonStringConverter),(0,i.JsonElementType)(String),n.__metadata("design:type",Array)],a.prototype,"Role",void 0),n.__decorate([(0,i.JsonProperty)("narration"),(0,i.JsonElementType)(o),n.__metadata("design:type",Array)],a.prototype,"Children",void 0),a=o=n.__decorate([(0,i.JsonObject)()],a),e.MediaOverlayNode=a},4125:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BelongsTo=void 0;const o=r(655),n=r(8850),i=r(2525),s=r(1418);let a=class{};o.__decorate([(0,n.JsonProperty)("series"),(0,n.JsonElementType)(i.Contributor),(0,n.JsonConverter)(s.JsonContributorConverter),o.__metadata("design:type",Array)],a.prototype,"Series",void 0),o.__decorate([(0,n.JsonProperty)("collection"),(0,n.JsonElementType)(i.Contributor),(0,n.JsonConverter)(s.JsonContributorConverter),o.__metadata("design:type",Array)],a.prototype,"Collection",void 0),a=o.__decorate([(0,n.JsonObject)()],a),e.BelongsTo=a},1418:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JsonContributorConverter=void 0;const o=r(4555),n=r(2525);e.JsonContributorConverter=class{serialize(t){return!t.Name||t.SortAs||t.Role&&t.Role.length||t.Identifier||void 0!==t.Position||t.Links&&t.Links.length||"string"!=typeof t.Name?(0,o.TaJsonSerialize)(t):t.Name}deserialize(t){if("string"==typeof t){const e=new n.Contributor;return e.Name=t,e}return(0,o.TaJsonDeserialize)(t,n.Contributor)}collapseArrayWithSingleItem(){return!0}}},2525:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Contributor=void 0;const o=r(655),n=r(8850),i=r(3536),s=r(4769);let a=class{get SortAs(){return this.SortAs2?this.SortAs2:this.SortAs1}set SortAs(t){t&&(this.SortAs1=void 0,this.SortAs2=t)}_OnDeserialized(){this.Name||console.log("Contributor.Name is not set!")}};o.__decorate([(0,n.JsonProperty)("name"),o.__metadata("design:type",Object)],a.prototype,"Name",void 0),o.__decorate([(0,n.JsonProperty)("sortAs"),o.__metadata("design:type",String)],a.prototype,"SortAs2",void 0),o.__decorate([(0,n.JsonProperty)("sort_as"),o.__metadata("design:type",Object)],a.prototype,"SortAs1",void 0),o.__decorate([(0,n.JsonProperty)("role"),(0,n.JsonConverter)(i.JsonStringConverter),(0,n.JsonElementType)(String),o.__metadata("design:type",Array)],a.prototype,"Role",void 0),o.__decorate([(0,n.JsonProperty)("identifier"),o.__metadata("design:type",String)],a.prototype,"Identifier",void 0),o.__decorate([(0,n.JsonProperty)("position"),o.__metadata("design:type",Number)],a.prototype,"Position",void 0),o.__decorate([(0,n.JsonProperty)("links"),(0,n.JsonElementType)(s.Link),o.__metadata("design:type",Array)],a.prototype,"Links",void 0),o.__decorate([(0,n.OnDeserialized)(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],a.prototype,"_OnDeserialized",null),a=o.__decorate([(0,n.JsonObject)()],a),e.Contributor=a},4958:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MediaOverlay=void 0;const o=r(655),n=r(8850);let i=class{};o.__decorate([(0,n.JsonProperty)("active-class"),o.__metadata("design:type",String)],i.prototype,"ActiveClass",void 0),o.__decorate([(0,n.JsonProperty)("playback-active-class"),o.__metadata("design:type",String)],i.prototype,"PlaybackActiveClass",void 0),i=o.__decorate([(0,n.JsonObject)()],i),e.MediaOverlay=i},4075:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Properties=e.PropertiesSupportedKeys=e.SpreadEnum=e.PageEnum=e.OverflowEnum=e.OrientationEnum=e.LayoutEnum=void 0;const o=r(655),n=r(8850),i=r(9475);!function(t){t.Fixed="fixed",t.Reflowable="reflowable"}(e.LayoutEnum||(e.LayoutEnum={})),function(t){t.Auto="auto",t.Landscape="landscape",t.Portrait="portrait"}(e.OrientationEnum||(e.OrientationEnum={})),function(t){t.Auto="auto",t.Paginated="paginated",t.Scrolled="scrolled",t.ScrolledContinuous="scrolled-continuous"}(e.OverflowEnum||(e.OverflowEnum={})),function(t){t.Left="left",t.Right="right",t.Center="center"}(e.PageEnum||(e.PageEnum={})),function(t){t.Auto="auto",t.Both="both",t.None="none",t.Landscape="landscape"}(e.SpreadEnum||(e.SpreadEnum={})),e.PropertiesSupportedKeys=["contains","layout","orientation","overflow","page","spread","encrypted","media-overlay"];let s=class{};o.__decorate([(0,n.JsonProperty)("contains"),(0,n.JsonElementType)(String),o.__metadata("design:type",Array)],s.prototype,"Contains",void 0),o.__decorate([(0,n.JsonProperty)("layout"),o.__metadata("design:type",String)],s.prototype,"Layout",void 0),o.__decorate([(0,n.JsonProperty)("orientation"),o.__metadata("design:type",String)],s.prototype,"Orientation",void 0),o.__decorate([(0,n.JsonProperty)("overflow"),o.__metadata("design:type",String)],s.prototype,"Overflow",void 0),o.__decorate([(0,n.JsonProperty)("page"),o.__metadata("design:type",String)],s.prototype,"Page",void 0),o.__decorate([(0,n.JsonProperty)("spread"),o.__metadata("design:type",String)],s.prototype,"Spread",void 0),o.__decorate([(0,n.JsonProperty)("encrypted"),o.__metadata("design:type",i.Encrypted)],s.prototype,"Encrypted",void 0),o.__decorate([(0,n.JsonProperty)("media-overlay"),o.__metadata("design:type",String)],s.prototype,"MediaOverlay",void 0),s=o.__decorate([(0,n.JsonObject)()],s),e.Properties=s},213:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JsonSubjectConverter=void 0;const o=r(4555),n=r(9857);e.JsonSubjectConverter=class{serialize(t){return!t.Name||t.SortAs||t.Scheme||t.Code||t.Links&&t.Links.length||"string"!=typeof t.Name?(0,o.TaJsonSerialize)(t):t.Name}deserialize(t){if("string"==typeof t){const e=new n.Subject;return e.Name=t,e}return(0,o.TaJsonDeserialize)(t,n.Subject)}collapseArrayWithSingleItem(){return!0}}},9857:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Subject=void 0;const o=r(655),n=r(8850),i=r(4769);let s=class{get SortAs(){return this.SortAs2?this.SortAs2:this.SortAs1}set SortAs(t){t&&(this.SortAs1=void 0,this.SortAs2=t)}_OnDeserialized(){this.Name||console.log("Subject.Name is not set!")}};o.__decorate([(0,n.JsonProperty)("name"),o.__metadata("design:type",Object)],s.prototype,"Name",void 0),o.__decorate([(0,n.JsonProperty)("sortAs"),o.__metadata("design:type",String)],s.prototype,"SortAs2",void 0),o.__decorate([(0,n.JsonProperty)("sort_as"),o.__metadata("design:type",Object)],s.prototype,"SortAs1",void 0),o.__decorate([(0,n.JsonProperty)("scheme"),o.__metadata("design:type",String)],s.prototype,"Scheme",void 0),o.__decorate([(0,n.JsonProperty)("code"),o.__metadata("design:type",String)],s.prototype,"Code",void 0),o.__decorate([(0,n.JsonProperty)("links"),(0,n.JsonElementType)(i.Link),o.__metadata("design:type",Array)],s.prototype,"Links",void 0),o.__decorate([(0,n.OnDeserialized)(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],s.prototype,"_OnDeserialized",null),s=o.__decorate([(0,n.JsonObject)()],s),e.Subject=s},6110:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=e.MetadataSupportedKeys=e.DirectionEnum=void 0;const o=r(655),n=r(8850),i=r(3536),s=r(4125),a=r(2525),l=r(1418),c=r(4958),u=r(4075),d=r(9857),p=r(213);!function(t){t.Auto="auto",t.RTL="rtl",t.LTR="ltr"}(e.DirectionEnum||(e.DirectionEnum={})),e.MetadataSupportedKeys=["cover","dtb:totalTime","media:duration","media:narrator","media:active-class","media:playback-active-class","dcterms:modified","dcterms:creator","dcterms:contributor","schema:accessMode","schema:accessibilityFeature","schema:accessibilityHazard","schema:accessibilitySummary","schema:accessModeSufficient","schema:accessibilityAPI","schema:accessibilityControl","a11y:certifiedBy","a11y:certifierCredential","a11y:certifierReport","dcterms:conformsTo","title","subtitle","identifier","author","translator","editor","artist","illustrator","letterer","penciler","colorist","inker","narrator","contributor","publisher","imprint","language","modified","published","sortAs","description","readingProgression","direction","belongsTo","duration","numberOfPages","rights","rendition","source","subject"];let h=class{get SortAs(){return this.SortAs2?this.SortAs2:this.SortAs1}set SortAs(t){t&&(this.SortAs1=void 0,this.SortAs2=t)}get Direction(){return this.Direction2?this.Direction2:this.Direction1}set Direction(t){t&&(this.Direction1=void 0,this.Direction2=t)}get BelongsTo(){return this.BelongsTo2?this.BelongsTo2:this.BelongsTo1}set BelongsTo(t){t&&(this.BelongsTo1=void 0,this.BelongsTo2=t)}_OnDeserialized(){this.Title||console.log("Metadata.Title is not set!")}};o.__decorate([(0,n.JsonProperty)("accessMode"),(0,n.JsonConverter)(i.JsonStringConverter),(0,n.JsonElementType)(String),o.__metadata("design:type",Array)],h.prototype,"AccessMode",void 0),o.__decorate([(0,n.JsonProperty)("accessibilityFeature"),(0,n.JsonConverter)(i.JsonStringConverter),(0,n.JsonElementType)(String),o.__metadata("design:type",Array)],h.prototype,"AccessibilityFeature",void 0),o.__decorate([(0,n.JsonProperty)("accessibilityHazard"),(0,n.JsonConverter)(i.JsonStringConverter),(0,n.JsonElementType)(String),o.__metadata("design:type",Array)],h.prototype,"AccessibilityHazard",void 0),o.__decorate([(0,n.JsonProperty)("accessibilitySummary"),o.__metadata("design:type",Object)],h.prototype,"AccessibilitySummary",void 0),o.__decorate([(0,n.JsonProperty)("accessModeSufficient"),(0,n.JsonElementType)(Array),o.__metadata("design:type",Array)],h.prototype,"AccessModeSufficient",void 0),o.__decorate([(0,n.JsonProperty)("accessibilityAPI"),(0,n.JsonConverter)(i.JsonStringConverter),(0,n.JsonElementType)(String),o.__metadata("design:type",Array)],h.prototype,"AccessibilityAPI",void 0),o.__decorate([(0,n.JsonProperty)("accessibilityControl"),(0,n.JsonConverter)(i.JsonStringConverter),(0,n.JsonElementType)(String),o.__metadata("design:type",Array)],h.prototype,"AccessibilityControl",void 0),o.__decorate([(0,n.JsonProperty)("certifiedBy"),(0,n.JsonConverter)(i.JsonStringConverter),(0,n.JsonElementType)(String),o.__metadata("design:type",Array)],h.prototype,"CertifiedBy",void 0),o.__decorate([(0,n.JsonProperty)("certifierCredential"),(0,n.JsonConverter)(i.JsonStringConverter),(0,n.JsonElementType)(String),o.__metadata("design:type",Array)],h.prototype,"CertifierCredential",void 0),o.__decorate([(0,n.JsonProperty)("certifierReport"),(0,n.JsonConverter)(i.JsonStringConverter),(0,n.JsonElementType)(String),o.__metadata("design:type",Array)],h.prototype,"CertifierReport",void 0),o.__decorate([(0,n.JsonProperty)("conformsTo"),(0,n.JsonConverter)(i.JsonStringConverter),(0,n.JsonElementType)(String),o.__metadata("design:type",Array)],h.prototype,"ConformsTo",void 0),o.__decorate([(0,n.JsonProperty)("@type"),o.__metadata("design:type",String)],h.prototype,"RDFType",void 0),o.__decorate([(0,n.JsonProperty)("title"),o.__metadata("design:type",Object)],h.prototype,"Title",void 0),o.__decorate([(0,n.JsonProperty)("subtitle"),o.__metadata("design:type",Object)],h.prototype,"SubTitle",void 0),o.__decorate([(0,n.JsonProperty)("identifier"),o.__metadata("design:type",String)],h.prototype,"Identifier",void 0),o.__decorate([(0,n.JsonProperty)("author"),(0,n.JsonElementType)(a.Contributor),(0,n.JsonConverter)(l.JsonContributorConverter),o.__metadata("design:type",Array)],h.prototype,"Author",void 0),o.__decorate([(0,n.JsonProperty)("translator"),(0,n.JsonElementType)(a.Contributor),(0,n.JsonConverter)(l.JsonContributorConverter),o.__metadata("design:type",Array)],h.prototype,"Translator",void 0),o.__decorate([(0,n.JsonProperty)("editor"),(0,n.JsonElementType)(a.Contributor),(0,n.JsonConverter)(l.JsonContributorConverter),o.__metadata("design:type",Array)],h.prototype,"Editor",void 0),o.__decorate([(0,n.JsonProperty)("artist"),(0,n.JsonElementType)(a.Contributor),(0,n.JsonConverter)(l.JsonContributorConverter),o.__metadata("design:type",Array)],h.prototype,"Artist",void 0),o.__decorate([(0,n.JsonProperty)("illustrator"),(0,n.JsonElementType)(a.Contributor),(0,n.JsonConverter)(l.JsonContributorConverter),o.__metadata("design:type",Array)],h.prototype,"Illustrator",void 0),o.__decorate([(0,n.JsonProperty)("letterer"),(0,n.JsonElementType)(a.Contributor),(0,n.JsonConverter)(l.JsonContributorConverter),o.__metadata("design:type",Array)],h.prototype,"Letterer",void 0),o.__decorate([(0,n.JsonProperty)("penciler"),(0,n.JsonElementType)(a.Contributor),(0,n.JsonConverter)(l.JsonContributorConverter),o.__metadata("design:type",Array)],h.prototype,"Penciler",void 0),o.__decorate([(0,n.JsonProperty)("colorist"),(0,n.JsonElementType)(a.Contributor),(0,n.JsonConverter)(l.JsonContributorConverter),o.__metadata("design:type",Array)],h.prototype,"Colorist",void 0),o.__decorate([(0,n.JsonProperty)("inker"),(0,n.JsonElementType)(a.Contributor),(0,n.JsonConverter)(l.JsonContributorConverter),o.__metadata("design:type",Array)],h.prototype,"Inker",void 0),o.__decorate([(0,n.JsonProperty)("narrator"),(0,n.JsonElementType)(a.Contributor),(0,n.JsonConverter)(l.JsonContributorConverter),o.__metadata("design:type",Array)],h.prototype,"Narrator",void 0),o.__decorate([(0,n.JsonProperty)("contributor"),(0,n.JsonElementType)(a.Contributor),(0,n.JsonConverter)(l.JsonContributorConverter),o.__metadata("design:type",Array)],h.prototype,"Contributor",void 0),o.__decorate([(0,n.JsonProperty)("publisher"),(0,n.JsonElementType)(a.Contributor),(0,n.JsonConverter)(l.JsonContributorConverter),o.__metadata("design:type",Array)],h.prototype,"Publisher",void 0),o.__decorate([(0,n.JsonProperty)("imprint"),(0,n.JsonElementType)(a.Contributor),(0,n.JsonConverter)(l.JsonContributorConverter),o.__metadata("design:type",Array)],h.prototype,"Imprint",void 0),o.__decorate([(0,n.JsonProperty)("language"),(0,n.JsonElementType)(String),(0,n.JsonConverter)(i.JsonStringConverter),o.__metadata("design:type",Array)],h.prototype,"Language",void 0),o.__decorate([(0,n.JsonProperty)("modified"),o.__metadata("design:type",Date)],h.prototype,"Modified",void 0),o.__decorate([(0,n.JsonProperty)("published"),o.__metadata("design:type",Date)],h.prototype,"PublicationDate",void 0),o.__decorate([(0,n.JsonProperty)("sortAs"),o.__metadata("design:type",String)],h.prototype,"SortAs2",void 0),o.__decorate([(0,n.JsonProperty)("sort_as"),o.__metadata("design:type",Object)],h.prototype,"SortAs1",void 0),o.__decorate([(0,n.JsonProperty)("description"),o.__metadata("design:type",String)],h.prototype,"Description",void 0),o.__decorate([(0,n.JsonProperty)("readingProgression"),o.__metadata("design:type",String)],h.prototype,"Direction2",void 0),o.__decorate([(0,n.JsonProperty)("direction"),o.__metadata("design:type",Object)],h.prototype,"Direction1",void 0),o.__decorate([(0,n.JsonProperty)("belongsTo"),o.__metadata("design:type",s.BelongsTo)],h.prototype,"BelongsTo2",void 0),o.__decorate([(0,n.JsonProperty)("belongs_to"),o.__metadata("design:type",Object)],h.prototype,"BelongsTo1",void 0),o.__decorate([(0,n.JsonProperty)("duration"),o.__metadata("design:type",Number)],h.prototype,"Duration",void 0),o.__decorate([(0,n.JsonProperty)("numberOfPages"),o.__metadata("design:type",Number)],h.prototype,"NumberOfPages",void 0),o.__decorate([(0,n.JsonProperty)("media-overlay"),o.__metadata("design:type",c.MediaOverlay)],h.prototype,"MediaOverlay",void 0),o.__decorate([(0,n.JsonProperty)("rights"),o.__metadata("design:type",String)],h.prototype,"Rights",void 0),o.__decorate([(0,n.JsonProperty)("rendition"),o.__metadata("design:type",u.Properties)],h.prototype,"Rendition",void 0),o.__decorate([(0,n.JsonProperty)("source"),o.__metadata("design:type",String)],h.prototype,"Source",void 0),o.__decorate([(0,n.JsonProperty)("subject"),(0,n.JsonConverter)(p.JsonSubjectConverter),(0,n.JsonElementType)(d.Subject),o.__metadata("design:type",Array)],h.prototype,"Subject",void 0),o.__decorate([(0,n.OnDeserialized)(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],h.prototype,"_OnDeserialized",null),h=o.__decorate([(0,n.JsonObject)()],h),e.Metadata=h},4769:(t,e,r)=>{"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),e.Link=void 0;const n=r(655),i=r(8850),s=r(3536),a=r(1649),l=r(4075);let c=o=class{get Href(){return this.Href1}set Href(t){this.Href1=t,this._urlDecoded=void 0}get HrefDecoded(){if(this._urlDecoded)return this._urlDecoded;if(null!==this._urlDecoded){if(this.Href)return this._urlDecoded=(0,a.tryDecodeURI)(this.Href),this._urlDecoded?this._urlDecoded:void 0;this._urlDecoded=null}}set HrefDecoded(t){this._urlDecoded=t}setHrefDecoded(t){this.Href=t,this.HrefDecoded=t}AddRels(t){t.forEach((t=>{this.AddRel(t)}))}AddRel(t){this.HasRel(t)||(this.Rel?this.Rel.push(t):this.Rel=[t])}HasRel(t){return this.Rel&&this.Rel.indexOf(t)>=0}_OnDeserialized(){this.Href||this.Children&&this.Children.length||console.log("Link.Href is not set! (and no child Links)")}};n.__decorate([(0,i.JsonProperty)("type"),n.__metadata("design:type",String)],c.prototype,"TypeLink",void 0),n.__decorate([(0,i.JsonProperty)("height"),n.__metadata("design:type",Number)],c.prototype,"Height",void 0),n.__decorate([(0,i.JsonProperty)("width"),n.__metadata("design:type",Number)],c.prototype,"Width",void 0),n.__decorate([(0,i.JsonProperty)("title"),n.__metadata("design:type",String)],c.prototype,"Title",void 0),n.__decorate([(0,i.JsonProperty)("properties"),n.__metadata("design:type",l.Properties)],c.prototype,"Properties",void 0),n.__decorate([(0,i.JsonProperty)("duration"),n.__metadata("design:type",Number)],c.prototype,"Duration",void 0),n.__decorate([(0,i.JsonProperty)("bitrate"),n.__metadata("design:type",Number)],c.prototype,"Bitrate",void 0),n.__decorate([(0,i.JsonProperty)("templated"),n.__metadata("design:type",Boolean)],c.prototype,"Templated",void 0),n.__decorate([(0,i.JsonProperty)("children"),(0,i.JsonElementType)(o),n.__metadata("design:type",Array)],c.prototype,"Children",void 0),n.__decorate([(0,i.JsonProperty)("alternate"),(0,i.JsonElementType)(o),n.__metadata("design:type",Array)],c.prototype,"Alternate",void 0),n.__decorate([(0,i.JsonProperty)("rel"),(0,i.JsonConverter)(s.JsonStringConverter),(0,i.JsonElementType)(String),n.__metadata("design:type",Array)],c.prototype,"Rel",void 0),n.__decorate([(0,i.JsonProperty)("href"),n.__metadata("design:type",String)],c.prototype,"Href1",void 0),n.__decorate([(0,i.OnDeserialized)(),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[]),n.__metadata("design:returntype",void 0)],c.prototype,"_OnDeserialized",null),c=o=n.__decorate([(0,i.JsonObject)()],c),e.Link=c},6e3:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Publication=void 0;const o=r(655),n=r(1227),i=r(8850),s=r(3536),a=r(6110),l=r(4769),c=n("r2:shared#models/publication");let u=class{get Spine(){return this.Spine2?this.Spine2:this.Spine1}set Spine(t){t&&(this.Spine1=void 0,this.Spine2=t)}get PageList(){return this.PageList2?this.PageList2:this.PageList1}set PageList(t){t&&(this.PageList1=void 0,this.PageList2=t)}freeDestroy(){if(c("freeDestroy: Publication"),this.Internal){const t=this.findFromInternal("zip");if(t){t.Value.freeDestroy()}}}findFromInternal(t){if(this.Internal){const e=this.Internal.find((e=>e.Name===t));if(e)return e}}AddToInternal(t,e){const r=this.findFromInternal(t);if(r)r.Value=e;else{this.Internal||(this.Internal=[]);const r={Name:t,Value:e};this.Internal.push(r)}}GetCover(){return this.searchLinkByRel("cover")}GetNavDoc(){return this.searchLinkByRel("contents")}searchLinkByRel(t){if(this.Resources){const e=this.Resources.find((e=>e.HasRel(t)));if(e)return e}if(this.Spine){const e=this.Spine.find((e=>e.HasRel(t)));if(e)return e}if(this.Links){const e=this.Links.find((e=>e.HasRel(t)));if(e)return e}}AddLink(t,e,r,o){const n=new l.Link;n.AddRels(e),n.setHrefDecoded(r),n.TypeLink=t,void 0!==o&&(n.Templated=o),this.Links||(this.Links=[]),this.Links.push(n)}_OnDeserialized(){this.Metadata||console.log("Publication.Metadata is not set!"),this.Spine||console.log("Publication.Spine/ReadingOrder is not set!")}};o.__decorate([(0,i.JsonProperty)("@context"),(0,i.JsonElementType)(String),(0,i.JsonConverter)(s.JsonStringConverter),o.__metadata("design:type",Array)],u.prototype,"Context",void 0),o.__decorate([(0,i.JsonProperty)("metadata"),o.__metadata("design:type",a.Metadata)],u.prototype,"Metadata",void 0),o.__decorate([(0,i.JsonProperty)("links"),(0,i.JsonElementType)(l.Link),o.__metadata("design:type",Array)],u.prototype,"Links",void 0),o.__decorate([(0,i.JsonProperty)("readingOrder"),(0,i.JsonElementType)(l.Link),o.__metadata("design:type",Array)],u.prototype,"Spine2",void 0),o.__decorate([(0,i.JsonProperty)("spine"),(0,i.JsonElementType)(l.Link),o.__metadata("design:type",Object)],u.prototype,"Spine1",void 0),o.__decorate([(0,i.JsonProperty)("resources"),(0,i.JsonElementType)(l.Link),o.__metadata("design:type",Array)],u.prototype,"Resources",void 0),o.__decorate([(0,i.JsonProperty)("toc"),(0,i.JsonElementType)(l.Link),o.__metadata("design:type",Array)],u.prototype,"TOC",void 0),o.__decorate([(0,i.JsonProperty)("pageList"),(0,i.JsonElementType)(l.Link),o.__metadata("design:type",Array)],u.prototype,"PageList2",void 0),o.__decorate([(0,i.JsonProperty)("page-list"),(0,i.JsonElementType)(l.Link),o.__metadata("design:type",Object)],u.prototype,"PageList1",void 0),o.__decorate([(0,i.JsonProperty)("landmarks"),(0,i.JsonElementType)(l.Link),o.__metadata("design:type",Array)],u.prototype,"Landmarks",void 0),o.__decorate([(0,i.JsonProperty)("loi"),(0,i.JsonElementType)(l.Link),o.__metadata("design:type",Array)],u.prototype,"LOI",void 0),o.__decorate([(0,i.JsonProperty)("loa"),(0,i.JsonElementType)(l.Link),o.__metadata("design:type",Array)],u.prototype,"LOA",void 0),o.__decorate([(0,i.JsonProperty)("lov"),(0,i.JsonElementType)(l.Link),o.__metadata("design:type",Array)],u.prototype,"LOV",void 0),o.__decorate([(0,i.JsonProperty)("lot"),(0,i.JsonElementType)(l.Link),o.__metadata("design:type",Array)],u.prototype,"LOT",void 0),o.__decorate([(0,i.OnDeserialized)(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],u.prototype,"_OnDeserialized",null),u=o.__decorate([(0,i.JsonObject)()],u),e.Publication=u},3536:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JsonStringConverter=void 0;e.JsonStringConverter=class{serialize(t){return t}deserialize(t){return t}collapseArrayWithSingleItem(){return!0}}},8660:(t,e,r)=>{var o,n=r(4155);!function(t){!function(e){var o="object"==typeof r.g?r.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),i=s(t);function s(t,e){return function(r,o){"function"!=typeof t[r]&&Object.defineProperty(t,r,{configurable:!0,writable:!0,value:o}),e&&e(r,o)}}void 0===o.Reflect?o.Reflect=t:i=s(o.Reflect,i),function(t){var e=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,o=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",s="function"==typeof Object.create,a={__proto__:[]}instanceof Array,l=!s&&!a,c={create:s?function(){return nt(Object.create(null))}:a?function(){return nt({__proto__:null})}:function(){return nt({})},has:l?function(t,r){return e.call(t,r)}:function(t,e){return e in t},get:l?function(t,r){return e.call(t,r)?t[r]:void 0}:function(t,e){return t[e]}},u=Object.getPrototypeOf(Function),d="object"==typeof n&&n.env&&"true"===n.env.REFLECT_METADATA_USE_MAP_POLYFILL,p=d||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?et():Map,h=d||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?rt():Set,f=new(d||"function"!=typeof WeakMap?ot():WeakMap);function y(t,e,r,o){if(F(r)){if(!W(t))throw new TypeError;if(!q(e))throw new TypeError;return C(t,e)}if(!W(t))throw new TypeError;if(!N(e))throw new TypeError;if(!N(o)&&!F(o)&&!M(o))throw new TypeError;return M(o)&&(o=void 0),O(t,e,r=H(r),o)}function g(t,e){function r(r,o){if(!N(r))throw new TypeError;if(!F(o)&&!V(o))throw new TypeError;J(t,e,r,o)}return r}function v(t,e,r,o){if(!N(r))throw new TypeError;return F(o)||(o=H(o)),J(t,e,r,o)}function _(t,e,r){if(!N(e))throw new TypeError;return F(r)||(r=H(r)),E(t,e,r)}function m(t,e,r){if(!N(e))throw new TypeError;return F(r)||(r=H(r)),T(t,e,r)}function b(t,e,r){if(!N(e))throw new TypeError;return F(r)||(r=H(r)),$(t,e,r)}function w(t,e,r){if(!N(e))throw new TypeError;return F(r)||(r=H(r)),k(t,e,r)}function P(t,e){if(!N(t))throw new TypeError;return F(e)||(e=H(e)),j(t,e)}function S(t,e){if(!N(t))throw new TypeError;return F(e)||(e=H(e)),I(t,e)}function A(t,e,r){if(!N(e))throw new TypeError;F(r)||(r=H(r));var o=x(e,r,!1);if(F(o))return!1;if(!o.delete(t))return!1;if(o.size>0)return!0;var n=f.get(e);return n.delete(r),n.size>0||f.delete(e),!0}function C(t,e){for(var r=t.length-1;r>=0;--r){var o=(0,t[r])(e);if(!F(o)&&!M(o)){if(!q(o))throw new TypeError;e=o}}return e}function O(t,e,r,o){for(var n=t.length-1;n>=0;--n){var i=(0,t[n])(e,r,o);if(!F(i)&&!M(i)){if(!N(i))throw new TypeError;o=i}}return o}function x(t,e,r){var o=f.get(t);if(F(o)){if(!r)return;o=new p,f.set(t,o)}var n=o.get(e);if(F(n)){if(!r)return;n=new p,o.set(e,n)}return n}function E(t,e,r){if(T(t,e,r))return!0;var o=tt(e);return!M(o)&&E(t,o,r)}function T(t,e,r){var o=x(e,r,!1);return!F(o)&&D(o.has(t))}function $(t,e,r){if(T(t,e,r))return k(t,e,r);var o=tt(e);return M(o)?void 0:$(t,o,r)}function k(t,e,r){var o=x(e,r,!1);if(!F(o))return o.get(t)}function J(t,e,r,o){x(r,o,!0).set(t,e)}function j(t,e){var r=I(t,e),o=tt(t);if(null===o)return r;var n=j(o,e);if(n.length<=0)return r;if(r.length<=0)return n;for(var i=new h,s=[],a=0,l=r;a<l.length;a++){var c=l[a];i.has(c)||(i.add(c),s.push(c))}for(var u=0,d=n;u<d.length;u++){c=d[u];i.has(c)||(i.add(c),s.push(c))}return s}function I(t,e){var r=[],o=x(t,e,!1);if(F(o))return r;for(var n=X(o.keys()),i=0;;){var s=Z(n);if(!s)return r.length=i,r;var a=Y(s);try{r[i]=a}catch(t){try{Q(n)}finally{throw t}}i++}}function R(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function F(t){return void 0===t}function M(t){return null===t}function B(t){return"symbol"==typeof t}function N(t){return"object"==typeof t?null!==t:"function"==typeof t}function U(t,e){switch(R(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var r=3===e?"string":5===e?"number":"default",n=K(t,o);if(void 0!==n){var i=n.call(t,r);if(N(i))throw new TypeError;return i}return L(t,"default"===r?"number":r)}function L(t,e){if("string"===e){var r=t.toString;if(G(r))if(!N(n=r.call(t)))return n;if(G(o=t.valueOf))if(!N(n=o.call(t)))return n}else{var o;if(G(o=t.valueOf))if(!N(n=o.call(t)))return n;var n,i=t.toString;if(G(i))if(!N(n=i.call(t)))return n}throw new TypeError}function D(t){return!!t}function z(t){return""+t}function H(t){var e=U(t,3);return B(e)?e:z(e)}function W(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function G(t){return"function"==typeof t}function q(t){return"function"==typeof t}function V(t){switch(R(t)){case 3:case 4:return!0;default:return!1}}function K(t,e){var r=t[e];if(null!=r){if(!G(r))throw new TypeError;return r}}function X(t){var e=K(t,i);if(!G(e))throw new TypeError;var r=e.call(t);if(!N(r))throw new TypeError;return r}function Y(t){return t.value}function Z(t){var e=t.next();return!e.done&&e}function Q(t){var e=t.return;e&&e.call(t)}function tt(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===u)return e;if(e!==u)return e;var r=t.prototype,o=r&&Object.getPrototypeOf(r);if(null==o||o===Object.prototype)return e;var n=o.constructor;return"function"!=typeof n||n===t?e:n}function et(){var t={},e=[],r=function(){function t(t,e,r){this._index=0,this._keys=t,this._values=e,this._selector=r}return t.prototype["@@iterator"]=function(){return this},t.prototype[i]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var r=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var r=this._find(t,!0);return this._values[r]=e,this},e.prototype.delete=function(e){var r=this._find(e,!1);if(r>=0){for(var o=this._keys.length,n=r+1;n<o;n++)this._keys[n-1]=this._keys[n],this._values[n-1]=this._values[n];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new r(this._keys,this._values,o)},e.prototype.values=function(){return new r(this._keys,this._values,n)},e.prototype.entries=function(){return new r(this._keys,this._values,s)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[i]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function o(t,e){return t}function n(t,e){return e}function s(t,e){return[t,e]}}function rt(){return function(){function t(){this._map=new p}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[i]=function(){return this.keys()},t}()}function ot(){var t=16,r=c.create(),o=n();return function(){function t(){this._key=n()}return t.prototype.has=function(t){var e=i(t,!1);return void 0!==e&&c.has(e,this._key)},t.prototype.get=function(t){var e=i(t,!1);return void 0!==e?c.get(e,this._key):void 0},t.prototype.set=function(t,e){return i(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=i(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=n()},t}();function n(){var t;do{t="@@WeakMap@@"+l()}while(c.has(r,t));return r[t]=!0,t}function i(t,r){if(!e.call(t,o)){if(!r)return;Object.defineProperty(t,o,{value:c.create()})}return t[o]}function s(t,e){for(var r=0;r<e;++r)t[r]=255*Math.random()|0;return t}function a(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):s(new Uint8Array(t),t):s(new Array(t),t)}function l(){var e=a(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var r="",o=0;o<t;++o){var n=e[o];4!==o&&6!==o&&8!==o||(r+="-"),n<16&&(r+="0"),r+=n.toString(16).toLowerCase()}return r}}function nt(t){return t.__=void 0,delete t.__,t}t("decorate",y),t("metadata",g),t("defineMetadata",v),t("hasMetadata",_),t("hasOwnMetadata",m),t("getMetadata",b),t("getOwnMetadata",w),t("getMetadataKeys",P),t("getOwnMetadataKeys",S),t("deleteMetadata",A)}(i)}()}(o||(o={}))},8850:(t,e,r)=>{"use strict";r.r(e),r.d(e,{BeforeDeserialized:()=>b,BufferConverter:()=>S,DateConverter:()=>P,JSON:()=>I,JsonConstructor:()=>m,JsonConverter:()=>f,JsonDiscriminatorProperty:()=>v,JsonDiscriminatorValue:()=>_,JsonElementType:()=>h,JsonObject:()=>u,JsonProperty:()=>d,JsonReadonly:()=>y,JsonType:()=>p,JsonWriteonly:()=>g,OnDeserialized:()=>w,TaJson:()=>I,propertyConverters:()=>A});var o=function(){this.array=!1,this.set=!1,this.readonly=!1,this.writeonly=!1},n=function(){function t(){this.ctr=function(){},this.beforeDeserialized=function(){},this.onDeserialized=function(){},this.properties=new Map}return t.prototype.getProperty=function(t){var e=this.properties.get(t);return e||(e=new o,this.properties.set(t,e)),e},t}(),i=new Map;function s(t){var e=i.get(t);return e||(e=new n,i.set(t,e)),e}function a(t){if(!t)return[];var e=Object.getPrototypeOf(t);return[t.constructor].concat(a(e))}function l(t){var e=[];return i.forEach((function(r,o){Object.getPrototypeOf(o.prototype).constructor===t&&e.push([o,r])})),e}function c(t,e){var r,o=i.get(t),n=[];for(e&&o&&o.discriminatorProperty&&(n=n.concat(l(t)));0!==n.length&&!r;){var s=n.shift(),u=s[0],d=s[1];if(d.hasOwnProperty("discriminatorValue")){if(e&&o&&d.discriminatorValue===e[o.discriminatorProperty]){if(d.hasOwnProperty("discriminatorProperty"))return c(u,e);r=u}}else n=n.concat(l(u))}r||(r=t);var p=new Set(a(Object.create(r.prototype)));return Array.from(p).filter((function(t){return i.has(t)}))}function u(){return function(t){s(t)}}r(8660);function d(t){return function(e,r){var o=Reflect.getMetadata("design:type",e,r.toString()),n=s(e.constructor).getProperty(r.toString());n.serializedName=t||r.toString(),n.array=o===Array,n.set=o===Set,n.array||n.set||n.type||(n.type=o)}}function p(t){return function(e,r){s(e.constructor).getProperty(r.toString()).type=t}}function h(t){return function(e,r){s(e.constructor).getProperty(r.toString()).type=t}}function f(t){return function(e,r){var o=s(e.constructor).getProperty(r.toString());o.converter="function"==typeof t?new t:t}}function y(){return function(t,e){s(t.constructor).getProperty(e.toString()).readonly=!0}}function g(){return function(t,e){s(t.constructor).getProperty(e.toString()).writeonly=!0}}function v(t){return function(e){s(e).discriminatorProperty=t}}function _(t){return function(e){s(e).discriminatorValue=t}}function m(){return function(t,e){s(t.constructor).ctr=t[e.toString()]}}function b(){return function(t,e){s(t.constructor).beforeDeserialized=t[e.toString()]}}function w(){return function(t,e){s(t.constructor).onDeserialized=t[e.toString()]}}var P=function(){function t(){}return t.prototype.serialize=function(t){return t.toString()},t.prototype.deserialize=function(t){return new Date(t)},t.prototype.collapseArrayWithSingleItem=function(){return!1},t}(),S=function(){function t(t){void 0===t&&(t="json"),this._encoding=t}return t.prototype.serialize=function(t){return"json"===this._encoding?t.toJSON():t.toString(this._encoding)},t.prototype.deserialize=function(t){return"json"===this._encoding?Buffer.from(t.data):Buffer.from(t,this._encoding)},t.prototype.collapseArrayWithSingleItem=function(){return!1},t}(),A=new Map;"undefined"==typeof window&&A.set(Buffer,new S),A.set(Date,new P);var C=r(9539);function O(t,e,r){return void 0===r&&(r={keyToPreserveUnknownJSON:void 0}),t.constructor===Array?t.map((function(t){return x(t,e,r)})):x(t,e,r)}function x(t,e,r){void 0===e&&(e=Object.getPrototypeOf(t).constructor);var o=c(e);if(0===o.length)return t;var n=o.map((function(t){return i.get(t)})).filter((function(t){return!!t})),s={};if(n.forEach((function(e){e.properties.forEach((function(e,o){if(!e.type)throw new Error("Cannot serialize property '"+o+"' without type!");var n=t[o];null==n||e.writeonly||(e.set?s[e.serializedName]=E(Array.from(n||[]),e,r):e.array?s[e.serializedName]=E(n,e,r):s[e.serializedName]=T(n,e,r))}))})),r.keyToPreserveUnknownJSON){var a=r.keyToPreserveUnknownJSON;if(t[a])for(var l=function(e){var r;t[a].hasOwnProperty(e)&&(n.forEach((function(t){t.properties.forEach((function(t,o){r||e!==t.serializedName||(r=t)}))})),r||(void 0!==s[e]&&(console.log("???!!! TAJSON keyToPreserveUnknownJSON already serialized?! "+a+"."+e),console.log(C.inspect(s[e],{showHidden:!1,depth:1e3,colors:!0,customInspect:!1})),s[e]!==t[a][e]&&(console.log("???!!! TAJSON keyToPreserveUnknownJSON already serialized DIFF?! "+a+"."+e),console.log(C.inspect(t[a][e],{showHidden:!1,depth:1e3,colors:!0,customInspect:!1})))),s[e]=t[a][e]))},u=0,d=Object.keys(t[a]);u<d.length;u++){l(d[u])}}return s}function E(t,e,r){var o=t.map((function(t){return T(t,e,r)}));if(1===o.length){var n=e.converter||A.get(e.type);if(n&&n.collapseArrayWithSingleItem())return o[0]}return o}function T(t,e,r){var o=e.type===String||e.type===Boolean||e.type===Number,n=t,s=e.converter||A.get(e.type);if(s)return s.serialize(n);if(!o&&i.get(e.type))return n instanceof e.type?O(n,void 0,r):O(n,e.type,r);return n}var $=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var o=Array(t),n=0;for(e=0;e<r;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,n++)o[n]=i[s];return o};function k(t,e,r){return void 0===r&&(r={runConstructor:!1,keyToPreserveUnknownJSON:void 0}),t&&t.constructor===Array?t.map((function(t){return J(t,e,r)})):J(t,e,r)}function J(t,e,r){if(void 0===e&&(e=Object),!i.has(e))return t;var o=t,n=c(e,o),s=n[0],a=n.slice(1),l=Object.create(s.prototype),u=$(a.reverse(),[s]).map((function(t){return i.get(t)})).filter((function(t){return!!t}));if(u.forEach((function(t){r.runConstructor&&t.ctr.call(l),t.beforeDeserialized.call(l),t.properties.forEach((function(t,e){if(!t.type)throw new Error("Cannot deserialize property '"+e+"' without type!");var n=o[t.serializedName];if(null!=n&&!t.readonly)return t.array||t.set?(l[e]=function(t,e,r){var o=e.converter||A.get(e.type);return(t instanceof Array?t:o&&o.collapseArrayWithSingleItem()?[t]:t).map((function(t){return j(t,e,r)}))}(n,t,r),void(t.set&&(l[e]=new Set(l[e])))):void(l[e]=j(n,t,r))})),t.onDeserialized.call(l)})),r.keyToPreserveUnknownJSON){var d=r.keyToPreserveUnknownJSON;Object.keys(o).forEach((function(t){var e;o.hasOwnProperty(t)&&u.forEach((function(r){r.properties.forEach((function(r,o){e||t!==r.serializedName||(e=r)})),e?l[d]&&void 0!==l[d][t]&&delete l[d][t]:(l[d]||(l[d]={}),void 0!==l[d][t]&&l[d][t]!==o[t]&&(console.log("???!!! TAJSON keyToPreserveUnknownJSON already deserialized DIFF?! "+d+"."+t),console.log(C.inspect(o[t],{showHidden:!1,depth:1e3,colors:!0,customInspect:!1}))),l[d][t]=o[t])}))})),l[d]&&!Object.keys(l[d]).length&&delete l[d]}return l}function j(t,e,r){var o=e.type===String||e.type===Boolean||e.type===Number,n=t,s=e.converter||A.get(e.type);if(s)return s.deserialize(n);if(!o&&i.get(e.type))return k(n,e.type,r);return n}var I=function(){function t(){}return t.deserialize=function(t,e,r){return k(t,e,r)},t.parse=function(t,e,r){return this.deserialize(JSON.parse(t),e,r)},t.serialize=function(t,e){return O(t,void 0,e)},t.stringify=function(t,e){return JSON.stringify(this.serialize(t,e))},t}()},519:function(t,e,r){"use strict";var o=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(i<3?n(s):i>3?n(e,r,s):n(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},n=this&&this.__awaiter||function(t,e,r,o){return new(r||(r=Promise))((function(n,i){function s(t){try{l(o.next(t))}catch(t){i(t)}}function a(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const i=r(7677),s=r(5595),a=r(3959),l=r(2493),c=r(8850),u=r(9721);let d=class extends i.LitElement{constructor(){super(...arguments),this._imageLoading=!0,this._showCaption=!1,this._highlightBalloon=!1,this._currentPositionIdx=-1,this.currentTime=-1,this._setImageLoaded=()=>{this._imageLoading=!1,this.requestUpdate()},this._preloadedImages=new Set,this._highlightTextElement=()=>{const t=this._currentPosition,e=this.iframe;if(t&&(null==e?void 0:e.contentDocument)&&t.textId&&e.contentDocument.body){const r="readiumCSS-mo-active-default",o=e.contentDocument.body.querySelector(t.textId),n=e.contentDocument.body.querySelectorAll(`.${r}`);null==n||n.forEach((t=>t!==o&&t.classList.remove(r))),null==o||o.classList.add(r)}},this._timeupdateEvent=t=>{var e,r;try{const t=this._playlist;if(!t)return;const o=this._currentPosition;if(!o)return;const n=this.currentTime=null!==(r=null===(e=this.audio)||void 0===e?void 0:e.currentTime)&&void 0!==r?r:0;if(o.start<=n&&n<o.end)return;const i=this._currentAudio;let s=this._currentPositionIdx;for(let e=0;e<t.length;e+=1){const r=t[e];r!==o&&r.audio!==i||(!this._highlightBalloon&&r.text||r.isWithinOffset(n)&&(s=e))}this._currentPositionIdx!==s&&(this._currentPositionIdx=s,this.requestUpdate()),this._positionChanged()}finally{this._highlightTextElement()}},this._loadedAudioDataEvent=t=>{const e=this.audio;e&&(e.currentTime=this.currentTime),this._positionChanged()},this._endedEvent=t=>{this.canGoForward&&this._nextPage()}}get manifestUrl(){return this._manifestUrl}set manifestUrl(t){t?this._manifestUrl!==t&&(this._manifestUrl=new URL(t,location.href).href,this._loadComic().catch((t=>console.error(t)))):this._manifestUrl=void 0}get showCaption(){return this._showCaption}set showCaption(t){this._showCaption="true"==`${t}`,this.requestUpdate()}get highlightBalloon(){return this._highlightBalloon}set highlightBalloon(t){this._highlightBalloon="true"==`${t}`,this.requestUpdate()}get _prevPosition(){var t;for(let e=this._currentPositionIdx-1;e>=0;e-=1){const r=null===(t=this._playlist)||void 0===t?void 0:t[e];if(this.highlightBalloon||!(null==r?void 0:r.text))return r}}get _currentPosition(){var t;return null===(t=this._playlist)||void 0===t?void 0:t[this._currentPositionIdx]}get _nextPosition(){const t=this._playlist;if(t)for(let e=this._currentPositionIdx+1;e<t.length;e+=1){const r=t[e];if(this.highlightBalloon||!r.text)return r}}get _spineIdx(){var t;const e=null===(t=this._publication)||void 0===t?void 0:t.Spine,r=this.currentSpineItem;return r&&e?e.indexOf(r):-1}get _hasPrevPage(){return this._spineIdx>0}get _hasNextPage(){var t,e,r;return this._spineIdx<=(null!==(r=null===(e=null===(t=this._publication)||void 0===t?void 0:t.Spine)||void 0===e?void 0:e.length)&&void 0!==r?r:0)}get _currentNarratedPage(){var t;return null===(t=this._currentPosition)||void 0===t?void 0:t.narratedPage}get currentSpineItem(){var t;return null===(t=this._currentPosition)||void 0===t?void 0:t.readingItem}get _comicPageUrl(){var t;const e=null===(t=this._currentNarratedPage)||void 0===t?void 0:t.Href;return e?new URL(e,this.manifestUrl).href:null}get _currentPanel(){var t;return null===(t=this._currentPosition)||void 0===t?void 0:t.panel}get _pageHeight(){var t;return null===(t=this.currentSpineItem)||void 0===t?void 0:t.Height}get _pageWidth(){var t;return null===(t=this.currentSpineItem)||void 0===t?void 0:t.Width}get _currentBalloon(){var t;return null===(t=this._currentPosition)||void 0===t?void 0:t.text}get _balloonClipPath(){var t;return null===(t=this._currentBalloon)||void 0===t?void 0:t.ClipPath}get _panelClipPath(){const t=this._pageHeight,e=this._pageWidth,r=this._currentPanel;if(!(null==r?void 0:r.Fragment)||!t||!e)return null;const o=r.Fragment,n=/#xywh=([\d]+),([\d]+),([\d]+),([\d]+)/.exec(o);if(!n)return null;const[,i,s,a,l]=n.map((t=>Number(t)));return`inset(\n      ${s/t*100}%\n      ${100-(i+a)/e*100}%\n      ${100-(s+l)/t*100}%\n      ${i/e*100}%\n    )`}get _containerStyles(){var t,e;const r=this._pageStyles;return{"--balloon-clip-path":this._balloonClipPath,"--panel-clip-path":this._panelClipPath,"--panel-translate-x":`${null!==(t=null==r?void 0:r.translateX)&&void 0!==t?t:""}`,"--panel-translate-y":`${null!==(e=null==r?void 0:r.translateY)&&void 0!==e?e:""}`,"--rendered-width":null==r?void 0:r.renderedWidth,"--rendered-height":null==r?void 0:r.renderedHeight}}get _pageStyles(){var t,e,r,o;const n=this._pageHeight,i=this._pageWidth;if(!n||!i)return null;if(this._imageLoading)return{renderedWidth:"-1px",renderedHeight:"1px"};const s=this._currentPanel,a=null!==(t=null==s?void 0:s.X)&&void 0!==t?t:0,l=null!==(e=null==s?void 0:s.Y)&&void 0!==e?e:0,c=null!==(r=null==s?void 0:s.Width)&&void 0!==r?r:i,u=null!==(o=null==s?void 0:s.Height)&&void 0!==o?o:n,d=this.clientHeight-20,p=this.clientWidth-20,h=d/u,f=p/c,y=Math.min(h,f);return{translateX:`${-(a*y-(p-c*y+20)/2)}px`,translateY:`${-(l*y-(d-u*y+20)/2)}px`,renderedWidth:`${y*i}px`,renderedHeight:`${y*n}px`}}GoBack(){var t,e;if(!this.canGoBack)return;const r=this._currentPosition,o=this._prevPosition,n=this.audio;if(!n||!r||!o)return;this._currentPositionIdx=null!==(e=null===(t=this._playlist)||void 0===t?void 0:t.indexOf(o))&&void 0!==e?e:0;const i=this.isPlaying;this.pause(),this.currentTime=o.start,r.audio!==o.audio&&(n.src=o.audio),n.currentTime=o.start,this._positionChanged(),i&&this.play()}GoForward(){var t,e;if(!this.canGoForward)return;const r=this._currentPosition,o=this._nextPosition,n=this.audio;if(!n||!r||!o)return;this._currentPositionIdx=null!==(e=null===(t=this._playlist)||void 0===t?void 0:t.indexOf(o))&&void 0!==e?e:0;const i=this.isPlaying;this.currentTime=o.start,r.audio!==o.audio&&(n.src=o.audio),n.currentTime=o.start,this._positionChanged(),i&&this.play()}_nextPage(){var t,e;if(!this._hasNextPage)return;const r=null===(e=null===(t=this._publication)||void 0===t?void 0:t.Spine)||void 0===e?void 0:e[this._spineIdx+1];r&&this.goToSpineItem(r)}goToSpineItem(t){var e;const r=this.getFirstPlaylistIdxFromSpineItem(t);if(null==r||Number.isNaN(r))return;const o=this.isPlaying;this._currentPositionIdx=r,this._imageLoading=!0,this._positionChanged(),o&&(null===(e=this.audio)||void 0===e||e.addEventListener("loadeddata",(()=>this.play()),{once:!0}))}getFirstPlaylistIdxFromSpineItem(t){const e=this._playlist;if(e)for(let r=0;r<e.length;r+=1){if(e[r].readingItem===t)return r}}get canGoBack(){return!!this._prevPosition}get canGoForward(){return!!this._nextPosition}get numberOfPages(){var t,e,r;return null!==(r=null===(e=null===(t=this._publication)||void 0===t?void 0:t.Spine)||void 0===e?void 0:e.length)&&void 0!==r?r:0}get currentPageNumber(){var t,e,r;const o=this.currentSpineItem;return o?(null!==(r=null===(e=null===(t=this._publication)||void 0===t?void 0:t.Spine)||void 0===e?void 0:e.indexOf(o))&&void 0!==r?r:0)+1:-1}get isPlaying(){var t;return!1===(null===(t=this.audio)||void 0===t?void 0:t.paused)}get spine(){var t;return null===(t=this._publication)||void 0===t?void 0:t.Spine}play(){requestAnimationFrame((()=>{var t;null===(t=this.audio)||void 0===t||t.play().then((()=>this._positionChanged()))}))}pause(){var t;null===(t=this.audio)||void 0===t||t.pause(),this._positionChanged()}get duration(){var t,e;return null!==(e=null===(t=this.audio)||void 0===t?void 0:t.duration)&&void 0!==e?e:0}_loadComic(){var t,e,r,o,i,s,a,c,d;return n(this,void 0,void 0,(function*(){this._publication=void 0,this._playlist=void 0;const n=yield this._loadJsonFile(this._manifestUrl,u.default),h=new Map,f=new Array;function y(t){const e=new URL(t),r=/#t=(([0-9]+\.[0-9]+)|[0])?,([0-9]+\.[0-9]+)/.exec(e.hash);if(!r)throw new Error(t);const[,o,,n]=r;return{start:Number(o),end:Number(n)}}for(const t of n.Narration){t.Href=new URL(t.Href,this._manifestUrl).href,h.set(t.Href,t);for(const e of t.Panels)e.Audio&&(e.Audio=new URL(e.Audio,this._manifestUrl).href)}for(const c of null!==(t=n.Spine)&&void 0!==t?t:[])if(c.Href=new URL(c.Href,this._manifestUrl).href,null===(e=c.Properties)||void 0===e?void 0:e.MediaOverlay){const t=yield this._loadJsonFile(new URL(null===(r=c.Properties)||void 0===r?void 0:r.MediaOverlay,this._manifestUrl),l.MediaOverlayNode);for(const e of t.Children){e.Text=new URL(e.Text,this._manifestUrl).href;for(const t of null!==(o=e.Children)&&void 0!==o?o:[]){const e=new URL(t.Audio,this._manifestUrl),{start:r,end:o}=y(e.href);t.Audio=e.href,e.hash="";const n=new p;n.audio=e.href,n.start=r,n.end=o,n.textId=new URL(t.Text,this._manifestUrl).hash,n.readingItem=c,f.push(n)}}c.MediaOverlays=t}else if(null===(i=c.TypeLink)||void 0===i?void 0:i.startsWith("image/")){const t=h.get(c.Href);if(!t)throw new Error;for(const e of t.Panels){const r=new URL(e.Audio),{start:o,end:n}=y(r.href);r.hash="";const i=new p;if(i.audio=r.href,i.start=o,i.end=n,i.readingItem=c,i.narratedPage=t,i.panel=e,f.push(i),e.Texts){const o=e.Texts.filter((t=>!t.AudioFragment)).reduce(((t,e)=>{var r,o;return t+(null!==(o=null===(r=e.Text)||void 0===r?void 0:r.length)&&void 0!==o?o:0)}),0),n=e.Texts.filter((t=>!!t.AudioFragment)).map((t=>{const e=new URL(r.href);return e.hash=t.AudioFragment,y(e.href)})).reduce(((t,e)=>t+(e.end-e.start)),0),l=i.end-i.start-n;let u=i.start;for(const n of e.Texts){const i=(null!==(a=null===(s=n.Text)||void 0===s?void 0:s.length)&&void 0!==a?a:0)/o;n.AudioFragment||(n.AudioFragment=`#t=${u},${u+l*i}`);const d=new URL(r.href);d.hash=n.AudioFragment;const{start:h,end:g}=y(d.href);u=g;const v=new p;v.audio=r.href,v.start=h,v.end=g,v.readingItem=c,v.narratedPage=t,v.panel=e,v.text=n,f.push(v)}}}}else;this._playlist=f,this._publication=n,this._currentPositionIdx=0,this.currentTime=null!==(d=null===(c=this._currentPosition)||void 0===c?void 0:c.start)&&void 0!==d?d:0,this._positionChanged()}))}get _currentAudio(){var t;return null===(t=this._currentPosition)||void 0===t?void 0:t.audio}_loadJsonFile(t,e){return n(this,void 0,void 0,(function*(){if(!t)throw new Error("url cannot be undefined");const r=yield fetch(t);return c.TaJson.parse(yield r.text(),e)}))}get _isNarratedPage(){var t,e;return!!(null===(e=null===(t=this.currentSpineItem)||void 0===t?void 0:t.TypeLink)||void 0===e?void 0:e.startsWith("image/"))}render(){const t=this.currentSpineItem;if(!this._publication||!t)return i.html`<div>Loading</div>`;let e;return this._positionChanged(),e=this._isNarratedPage?i.html`
        <!-- Page -->
        ${this._renderImage("page")}

        <!-- Highlight panel box -->
        ${this._renderImage("panel-highlight",!!this._panelClipPath)}

        <!-- Highlight balloon box -->
        ${this._renderImage("balloon-highlight",!!this._balloonClipPath&&this.highlightBalloon)}

        <!-- caption box - if enabled -->
        ${this._renderCaption()}
      `:i.html`<iframe id="iframe" src="${t.Href}" @load=${this._highlightTextElement}></iframe>`,i.html`
      <div class="container" style=${(0,a.styleMap)(this._containerStyles)}>
        ${e}

        <!-- add audio element -->
        ${this._renderAudio()}

        <div class="preload-images" aria-hidden="true">${this._renderPreload()}</div>
      </div>
    `}_renderImage(t,e=!0){const r=this._comicPageUrl;return e&&r?(this._preloadedImages.has(r)&&(this._imageLoading=!1),i.html`
      <div class="${t}">
        <img src="${r}" @load=${this._setImageLoaded} />
      </div>
    `):i.nothing}_renderPreload(){const t=this.spine;if(!t)return i.nothing;const e=this._spineIdx;return null==e?i.nothing:t.slice(e,e+5).filter((t=>{var e;return!!(null===(e=t.TypeLink)||void 0===e?void 0:e.startsWith("image/"))&&!this._preloadedImages.has(t.Href)})).map((t=>i.html`<img src="${t.Href}" @load="${()=>this._preloadedImages.add(t.Href)}" />`))}_renderCaption(){var t;if(!this.showCaption)return i.nothing;const e=null===(t=this._currentBalloon)||void 0===t?void 0:t.Text;return e?i.html`<div class="caption">${e}</div>`:i.nothing}_renderAudio(){const t=this._currentAudio;return t?i.html`<audio
      id="audio"
      autoplay
      @loadeddata="${this._loadedAudioDataEvent}"
      @timeupdate=${this._timeupdateEvent}
      @ended=${this._endedEvent}
      src="${t}"
    ></audio>`:i.nothing}_positionChanged(){const t=new CustomEvent("position-changed");this.dispatchEvent(t)}};d.styles=i.css`
    :host {
      display: flex;
      padding: 0;
      margin: 0;
      position: relative;
      height: inherit;
      background-color: rgba(10, 10, 10, 0.15);
    }

    iframe {
      margin: 0 auto;
      flex-grow: 1;
      flex-shrink: 1;
      height: 100%;
      min-height: 0;
      max-width: 1024px;
      border: 0;
    }

    div.container {
      margin: 0 auto;
      display: flex;
      flex-grow: 1;
      flex-shrink: 1;
      height: 100%;
      min-height: 0;
    }

    div.container > div:is(.page, .panel-highlight, .balloon-highlight) {
      position: absolute;
      top: 0;
      left: 0;
      transform-origin: center;
      height: var(--rendered-height);
      width: var(--rendered-width);
      transform: translate(var(--panel-translate-x), var(--panel-translate-y));
    }

    div.container > div:is(.page, .panel-highlight, .balloon-highlight) > img {
      height: var(--rendered-height);
      width: var(--rendered-width);
    }

    div.balloon-highlight {
      background-color: rgba(116, 116, 116, 0.4);
    }

    div.balloon-highlight img {
      clip-path: var(--balloon-clip-path);
    }

    div.panel-highlight {
      background-color: rgba(30, 30, 30, 0.45);
    }

    div.panel-highlight img {
      clip-path: var(--panel-clip-path);
    }

    div.container > div.caption {
      position: absolute;
      left: unset;
      top: unset;
      right: 0;
      bottom: 0;
      font-weight: bold;
      margin: 2em;
      padding: 1em;
      background-color: rgba(200, 200, 200, 0.9);
      border-radius: 1rem;
    }

    #audio {
      height: 0;
      width: 0;
    }

    .preload-images {
      width: 1px;
      height: 1px;
      opacity: 0;
      overflow: hidden;
    }

    .preload-images img {
      width: 1px;
      height: 1px;
      opacity: 0;
    }
  `,o([(0,s.property)()],d.prototype,"_publication",void 0),o([(0,s.query)("#audio")],d.prototype,"audio",void 0),o([(0,s.query)("#iframe")],d.prototype,"iframe",void 0),o([(0,s.property)()],d.prototype,"_imageLoading",void 0),o([(0,s.property)({attribute:"manifest"})],d.prototype,"manifestUrl",null),o([(0,s.property)({attribute:"show-caption"})],d.prototype,"showCaption",null),o([(0,s.property)({attribute:"highlight-balloon"})],d.prototype,"highlightBalloon",null),o([(0,s.property)()],d.prototype,"_currentPositionIdx",void 0),o([(0,s.property)()],d.prototype,"currentTime",void 0),d=o([(0,s.customElement)("divian-navigator")],d),e.default=d;class p{isWithinOffset(t){return this.start-.001<=t&&t<this.end+.001}}},5821:function(t,e,r){"use strict";var o=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(i<3?n(s):i>3?n(e,r,s):n(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},n=this&&this.__awaiter||function(t,e,r,o){return new(r||(r=Promise))((function(n,i){function s(t){try{l(o.next(t))}catch(t){i(t)}}function a(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const i=r(7677),s=r(5595),a=r(3959),l=r(8850),c=r(4581),u=r(5684),d=r(9455);let p=class extends i.LitElement{constructor(){super(...arguments),this._imageLoading=!0,this._showCaption=!1,this._highlightBalloon=!1,this._blackWhiteRendering=!1,this._currentPositionIdx=-1,this.currentTime=-1,this._setImageLoaded=()=>{this._imageLoading=!1,this.requestUpdate()},this._preloadedImages=new Set,this._highlightTextElement=()=>{const t=this._currentPosition,e=this.iframe;if(t&&(null==e?void 0:e.contentDocument)&&t.textId&&e.contentDocument.body){const r="readiumCSS-mo-active-default",o=e.contentDocument.body.querySelector(t.textId),n=e.contentDocument.body.querySelectorAll(`.${r}`);null==n||n.forEach((t=>t!==o&&t.classList.remove(r))),null==o||o.classList.add(r)}},this._timeupdateEvent=t=>{var e,r;try{const t=this._playlist;if(!t)return;const o=this._currentPosition;if(!o)return;const n=this.currentTime=null!==(r=null===(e=this.audio)||void 0===e?void 0:e.currentTime)&&void 0!==r?r:0;if(o.isWithinOffset(n))return;const i=this._currentAudio;let s=this._currentPositionIdx;for(let e=0;e<t.length;e+=1){const r=t[e];r!==o&&r.audio!==i||(!this._highlightBalloon&&r.text||r.isWithinOffset(n)&&(s=e))}this._currentPositionIdx!==s&&(this._currentPositionIdx=s,this.requestUpdate()),this._positionChanged()}catch(t){console.error(t)}finally{this._highlightTextElement()}},this._loadedAudioDataEvent=t=>{const e=this.audio;e&&(e.currentTime=this.currentTime),this._positionChanged()},this._endedEvent=t=>{this.canGoForward&&this._nextPage()}}get manifestUrl(){return this._manifestUrl}set manifestUrl(t){t?this._manifestUrl!==t&&(this._manifestUrl=new URL(t,location.href).href,this._loadComic().catch((t=>console.error(t)))):this._manifestUrl=void 0}get showCaption(){return this._showCaption}set showCaption(t){this._showCaption="true"==`${t}`,this.requestUpdate()}get highlightBalloon(){return this._highlightBalloon}set highlightBalloon(t){this._highlightBalloon="true"==`${t}`,this.requestUpdate()}get blackWhiteRendering(){return this._blackWhiteRendering}set blackWhiteRendering(t){this._blackWhiteRendering="true"==`${t}`,this.requestUpdate()}get _prevPosition(){var t;for(let e=this._currentPositionIdx-1;e>=0;e-=1){const r=null===(t=this._playlist)||void 0===t?void 0:t[e];if(this.highlightBalloon||!(null==r?void 0:r.text))return r}}get _currentPosition(){var t;return null===(t=this._playlist)||void 0===t?void 0:t[this._currentPositionIdx]}get _nextPosition(){const t=this._playlist;if(t)for(let e=this._currentPositionIdx+1;e<t.length;e+=1){const r=t[e];if(this.highlightBalloon||!r.text)return r}}get _spineIdx(){var t;const e=null===(t=this._publication)||void 0===t?void 0:t.Spine,r=this.currentSpineItem;return r&&e?e.indexOf(r):-1}get _hasPrevPage(){return this._spineIdx>0}get _hasNextPage(){var t,e,r;return this._spineIdx<=(null!==(r=null===(e=null===(t=this._publication)||void 0===t?void 0:t.Spine)||void 0===e?void 0:e.length)&&void 0!==r?r:0)}get _currentComicPage(){var t;return null===(t=this._currentPosition)||void 0===t?void 0:t.comicPage}get currentSpineItem(){var t;return null===(t=this._currentPosition)||void 0===t?void 0:t.readingItem}get _comicPageUrl(){var t;return null===(t=this._currentComicPage)||void 0===t?void 0:t.imageRef}get _currentPanel(){var t;return null===(t=this._currentPosition)||void 0===t?void 0:t.panel}get _pageHeight(){var t;return null===(t=this.currentSpineItem)||void 0===t?void 0:t.Height}get _pageWidth(){var t;return null===(t=this.currentSpineItem)||void 0===t?void 0:t.Width}get _currentBalloon(){var t;return null===(t=this._currentPosition)||void 0===t?void 0:t.text}get _balloonClipPath(){var t;return null===(t=this._currentBalloon)||void 0===t?void 0:t.clipPath}get _panelClipPath(){const t=this._pageHeight,e=this._pageWidth,r=this._currentPanel,o=null==r?void 0:r.sizeInfo;if(!o||!t||!e)return null;const{x:n,y:i,height:s,width:a,isPercent:l}=o;if(null==n||null==i||null==s||null==a)return null;return`inset(\n      ${l?i:i/t*100}%\n      ${100-100*(l?n+a:(n+a)/e)}%\n      ${100-100*(l?i+s:(i+s)/t)}%\n      ${l?n:n/e*100}%\n    )`}get _containerStyles(){var t,e;const r=this._pageStyles;return{"--balloon-clip-path":this._balloonClipPath,"--panel-clip-path":this._panelClipPath,"--panel-translate-x":`${null!==(t=null==r?void 0:r.translateX)&&void 0!==t?t:""}`,"--panel-translate-y":`${null!==(e=null==r?void 0:r.translateY)&&void 0!==e?e:""}`,"--rendered-width":null==r?void 0:r.renderedWidth,"--rendered-height":null==r?void 0:r.renderedHeight}}get _pageStyles(){var t,e,r,o;const n=this._pageHeight,i=this._pageWidth;if(!n||!i)return null;if(this._imageLoading)return{renderedWidth:"-1px",renderedHeight:"1px"};const s=this._currentPanel,a=null==s?void 0:s.sizeInfo,l=null!==(t=null==a?void 0:a.x)&&void 0!==t?t:0,c=null!==(e=null==a?void 0:a.y)&&void 0!==e?e:0,u=null!==(r=null==a?void 0:a.height)&&void 0!==r?r:i,d=null!==(o=null==a?void 0:a.width)&&void 0!==o?o:n,p=!!(null==a?void 0:a.isPercent),h=p?l/100*i:l,f=p?c/100*n:c,y=p?d/100*i:d,g=p?u/100*n:u,v=this.clientHeight-20,_=this.clientWidth-20,m=v/g,b=_/y,w=Math.min(m,b);return{translateX:`${-(h*w-(_-y*w+20)/2)}px`,translateY:`${-(f*w-(v-g*w+20)/2)}px`,renderedWidth:`${w*i}px`,renderedHeight:`${w*n}px`}}GoBack(){var t,e;if(!this.canGoBack)return;const r=this._currentPosition,o=this._prevPosition,n=this.audio;if(!n||!r||!o)return;this._currentPositionIdx=null!==(e=null===(t=this._playlist)||void 0===t?void 0:t.indexOf(o))&&void 0!==e?e:0;const i=this.isPlaying;this.pause(),this.currentTime=o.start,r.audio!==o.audio&&(n.src=o.audio),n.currentTime=o.start,this._positionChanged(),i&&this.play()}GoForward(){var t,e;if(!this.canGoForward)return;const r=this._currentPosition,o=this._nextPosition,n=this.audio;if(!n||!r||!o)return;this._currentPositionIdx=null!==(e=null===(t=this._playlist)||void 0===t?void 0:t.indexOf(o))&&void 0!==e?e:0;const i=this.isPlaying;this.currentTime=o.start,r.audio!==o.audio&&(n.src=o.audio),n.currentTime=o.start,this._positionChanged(),i&&this.play()}_nextPage(){var t,e;if(!this._hasNextPage)return;const r=null===(e=null===(t=this._publication)||void 0===t?void 0:t.Spine)||void 0===e?void 0:e[this._spineIdx+1];r&&this.goToSpineItem(r)}goToSpineItem(t){var e;const r=this.getFirstPlaylistIdxFromSpineItem(t);if(null==r||Number.isNaN(r))return;const o=this.isPlaying;this._currentPositionIdx=r,this._imageLoading=!0,this._positionChanged(),o&&(null===(e=this.audio)||void 0===e||e.addEventListener("loadeddata",(()=>this.play()),{once:!0}))}getFirstPlaylistIdxFromSpineItem(t){const e=this._playlist;if(e)for(let r=0;r<e.length;r+=1){if(e[r].readingItem===t)return r}}get canGoBack(){return!!this._prevPosition}get canGoForward(){return!!this._nextPosition}get numberOfPages(){var t,e,r;return null!==(r=null===(e=null===(t=this._publication)||void 0===t?void 0:t.Spine)||void 0===e?void 0:e.length)&&void 0!==r?r:0}get currentPageNumber(){var t,e,r;const o=this.currentSpineItem;return o?(null!==(r=null===(e=null===(t=this._publication)||void 0===t?void 0:t.Spine)||void 0===e?void 0:e.indexOf(o))&&void 0!==r?r:0)+1:-1}get isPlaying(){var t;return!1===(null===(t=this.audio)||void 0===t?void 0:t.paused)}get spine(){var t;return null===(t=this._publication)||void 0===t?void 0:t.Spine}play(){requestAnimationFrame((()=>{var t;null===(t=this.audio)||void 0===t||t.play().then((()=>this._positionChanged()))}))}pause(){var t;null===(t=this.audio)||void 0===t||t.pause(),this._positionChanged()}get duration(){var t,e;return null!==(e=null===(t=this.audio)||void 0===t?void 0:t.duration)&&void 0!==e?e:0}_loadComic(){var t,e,r,o,i,s,a,l,d,p,f,y;return n(this,void 0,void 0,(function*(){this._publication=void 0,this._playlist=void 0;const n=yield this._loadJsonFile(this._manifestUrl,u.default),g=new Array,v=new c.default;v.children=[];const _=t=>new URL(t,this._manifestUrl).href;function m(t){var e;t.audioRef&&(t.audioRef=_(t.audioRef)),t.textRef&&(t.textRef=_(t.textRef)),t.imageRef&&(t.imageRef=_(t.imageRef)),t.description&&(t.description.audioRef&&(t.description.audioRef=_(t.description.audioRef)),t.description.imageRef&&(t.description.imageRef=_(t.description.imageRef))),null===(e=t.children)||void 0===e||e.forEach(m)}for(const e of null!==(t=n.GuidedNavigation)&&void 0!==t?t:[]){e.Href=_(e.Href);const t=yield this._loadJsonFile(e.Href,c.default);m(t),v.children.push(t)}for(const t of null!==(e=n.Spine)&&void 0!==e?e:[])t.Href=_(t.Href);for(const t of v.children){const e=null===(r=n.Spine)||void 0===r?void 0:r.find((e=>e.Href===t.imageRef||e.Href===t.textRef));if(!e)throw new Error("Reading item not found");if(t.textRef)for(const r of null!==(o=t.children)&&void 0!==o?o:[]){const t=r.textFragment;if(!t||!r.audioFile)continue;const o=new h;o.audio=r.audioFile,o.start=null!==(i=r.audioStart)&&void 0!==i?i:0,o.end=null!==(s=r.audioEnd)&&void 0!==s?s:0,o.readingItem=e,o.textId=t,g.push(o)}else if(t.imageRef)for(const r of null!==(a=t.children)&&void 0!==a?a:[]){if(!r.audioFile)continue;const o=new h;o.audio=r.audioFile,o.start=null!==(l=r.audioStart)&&void 0!==l?l:0,o.end=null!==(d=r.audioEnd)&&void 0!==d?d:0,o.readingItem=e,o.comicPage=t,o.panel=r,g.push(o);const n=r.children;if(n){const i=n.filter((t=>!t.audioRef)).reduce(((t,e)=>{var r,o;return t+(null!==(o=null===(r=e.children)||void 0===r?void 0:r.length)&&void 0!==o?o:0)}),n.length),s=n.filter((t=>!!t.audioFile)).reduce(((t,e)=>{var r,o;return t+((null!==(r=e.audioEnd)&&void 0!==r?r:0)-(null!==(o=e.audioStart)&&void 0!==o?o:0))}),0),a=o.end-o.start-s;let l=o.start;for(const s of n){const c=(null!==(p=null==n?void 0:n.length)&&void 0!==p?p:0)/i;if(!s.audioRef){const t=new URL(r.audioFile);t.hash=`#t=${l},${l+a*c}`,s.audioRef=t.href}if(!s.audioFile)continue;const u=null!==(f=s.audioStart)&&void 0!==f?f:0,d=null!==(y=s.audioEnd)&&void 0!==y?y:0;l=d,o.end>u&&(o.end=u);const v=new h;v.audio=s.audioFile,v.start=u,v.end=d,v.readingItem=e,v.comicPage=t,v.panel=r,v.text=s,g.push(v)}}}else;}this._playlist=g,this._publication=n,this._currentPositionIdx=12}))}get _currentAudio(){var t;return null===(t=this._currentPosition)||void 0===t?void 0:t.audio}_loadJsonFile(t,e){return n(this,void 0,void 0,(function*(){if(!t)throw new Error("url cannot be undefined");const r=yield fetch(t);return l.TaJson.parse(yield r.text(),e)}))}get _isNarratedPage(){var t,e;return!!(null===(e=null===(t=this.currentSpineItem)||void 0===t?void 0:t.TypeLink)||void 0===e?void 0:e.startsWith("image/"))}render(){const t=this.currentSpineItem;if(!this._publication||!t)return i.html`<div>Loading</div>`;let e;return this._positionChanged(),e=this._isNarratedPage?i.html`
        <!-- Page -->
        ${this._renderImage("page")}

        <!-- Highlight panel box -->
        ${this._renderImage("panel-highlight",!!this._panelClipPath)}

        <!-- Highlight balloon box -->
        ${this._renderImage("balloon-highlight",!!this._balloonClipPath&&this.highlightBalloon)}

        <!-- caption box - if enabled -->
        ${this._renderCaption()}
      `:i.html`<iframe id="iframe" src="${t.Href}" @load=${this._highlightTextElement}></iframe>`,i.html`
      <div class="container" style=${(0,a.styleMap)(this._containerStyles)}>
        ${e}

        <!-- add audio element -->
        ${this._renderAudio()}

        <div class="preload-images" aria-hidden="true">${this._renderPreload()}</div>
      </div>
    `}_renderImage(t,e=!0){const r=this._comicPageUrl;if(!e||!r)return i.nothing;this._preloadedImages.has(r)&&(this._imageLoading=!1);const o={[t]:!0,"black-white-rendering":this.blackWhiteRendering};return i.html`
      <div class="${(0,d.classMap)(o)}">
        <img src="${r}" @load=${this._setImageLoaded} />
      </div>
    `}_renderPreload(){const t=this.spine;if(!t)return i.nothing;const e=this._spineIdx;return null==e?i.nothing:t.slice(e,e+5).filter((t=>{var e;return!!(null===(e=t.TypeLink)||void 0===e?void 0:e.startsWith("image/"))&&!this._preloadedImages.has(t.Href)})).map((t=>i.html`<img src="${t.Href}" @load="${()=>this._preloadedImages.add(t.Href)}" />`))}_renderCaption(){var t;if(!this.showCaption)return i.nothing;const e=null===(t=this._currentBalloon)||void 0===t?void 0:t.text;return e?i.html`<div class="caption">${e}</div>`:i.nothing}_renderAudio(){const t=this._currentAudio;return t?i.html`<audio
      id="audio"
      ?autoplay=${this.isPlaying}
      @loadeddata="${this._loadedAudioDataEvent}"
      @timeupdate=${this._timeupdateEvent}
      @ended=${this._endedEvent}
      src="${t}"
    ></audio>`:i.nothing}_positionChanged(){const t=new CustomEvent("position-changed");this.dispatchEvent(t)}};p.styles=i.css`
    :host {
      display: flex;
      padding: 0;
      margin: 0;
      position: relative;
      height: inherit;
      background-color: rgba(10, 10, 10, 0.15);
    }

    iframe {
      margin: 0 auto;
      flex-grow: 1;
      flex-shrink: 1;
      height: 100%;
      min-height: 0;
      max-width: 1024px;
      border: 0;
    }

    div.container {
      margin: 0 auto;
      display: flex;
      flex-grow: 1;
      flex-shrink: 1;
      height: 100%;
      min-height: 0;
    }

    div.container > div:is(.page, .panel-highlight, .balloon-highlight) {
      position: absolute;
      top: 0;
      left: 0;
      transform-origin: center;
      height: var(--rendered-height);
      width: var(--rendered-width);
      transform: translate(var(--panel-translate-x), var(--panel-translate-y));
    }

    div.container > div:is(.page, .panel-highlight, .balloon-highlight) > img {
      height: var(--rendered-height);
      width: var(--rendered-width);
    }

    div.container > div.black-white-rendering > img {
      filter: brightness(1.4) grayscale(1) contrast(255);
      mix-blend-mode: hard-light;
    }

    div.balloon-highlight {
      background-color: rgba(116, 116, 116, 0.4);
    }

    div.balloon-highlight img {
      clip-path: var(--balloon-clip-path);
    }

    div.panel-highlight {
      background-color: rgba(30, 30, 30, 0.45);
    }

    div.panel-highlight img {
      clip-path: var(--panel-clip-path);
    }

    div.container > div.caption {
      position: absolute;
      left: unset;
      top: unset;
      right: 0;
      bottom: 0;
      font-weight: bold;
      margin: 2em;
      padding: 1em;
      background-color: rgba(200, 200, 200, 0.9);
      border-radius: 1rem;
    }

    #audio {
      height: 0;
      width: 0;
    }

    .preload-images {
      width: 1px;
      height: 1px;
      opacity: 0;
      overflow: hidden;
    }

    .preload-images img {
      width: 1px;
      height: 1px;
      opacity: 0;
    }
  `,o([(0,s.property)()],p.prototype,"_publication",void 0),o([(0,s.query)("#audio")],p.prototype,"audio",void 0),o([(0,s.query)("#iframe")],p.prototype,"iframe",void 0),o([(0,s.property)()],p.prototype,"_imageLoading",void 0),o([(0,s.property)({attribute:"manifest"})],p.prototype,"manifestUrl",null),o([(0,s.property)({attribute:"show-caption"})],p.prototype,"showCaption",null),o([(0,s.property)({attribute:"highlight-balloon"})],p.prototype,"highlightBalloon",null),o([(0,s.property)({attribute:"black-white-rendering"})],p.prototype,"blackWhiteRendering",null),o([(0,s.property)()],p.prototype,"_currentPositionIdx",void 0),o([(0,s.property)()],p.prototype,"currentTime",void 0),p=o([(0,s.customElement)("guided-publication-navigator")],p),e.default=p;class h{isWithinOffset(t){return this.start-.001<=t&&t<this.end+.001}}},9367:function(t,e,r){"use strict";var o=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(i<3?n(s):i>3?n(e,r,s):n(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(e,"__esModule",{value:!0});const n=r(4769),i=r(8850);class s{constructor(){this.Id="",this.Age="",this.Gender="",this.Roles=new Array}}o([(0,i.JsonProperty)("id"),(0,i.JsonType)(String)],s.prototype,"Id",void 0),o([(0,i.JsonProperty)("name")],s.prototype,"Name",void 0),o([(0,i.JsonProperty)("age"),(0,i.JsonType)(String)],s.prototype,"Age",void 0),o([(0,i.JsonProperty)("gender"),(0,i.JsonType)(String)],s.prototype,"Gender",void 0),o([(0,i.JsonProperty)("roles"),(0,i.JsonElementType)(String)],s.prototype,"Roles",void 0),o([(0,i.JsonProperty)("cover"),(0,i.JsonElementType)(n.Link)],s.prototype,"Cover",void 0),e.default=s},9721:function(t,e,r){"use strict";var o=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(i<3?n(s):i>3?n(e,r,s):n(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(e,"__esModule",{value:!0});const n=r(1969),i=r(8850),s=r(9367),a=r(5051);class l extends n.Publication{constructor(){super(...arguments),this.Narration=[],this.Characters=[]}}o([(0,i.JsonProperty)("narration"),(0,i.JsonElementType)(a.default)],l.prototype,"Narration",void 0),o([(0,i.JsonProperty)("characters"),(0,i.JsonElementType)(s.default)],l.prototype,"Characters",void 0),e.default=l},5051:function(t,e,r){"use strict";var o=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(i<3?n(s):i>3?n(e,r,s):n(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(e,"__esModule",{value:!0});const n=r(8850),i=r(5819);class s{constructor(){this.Href="",this.Title="",this.Panels=[]}}o([(0,n.JsonProperty)("href"),(0,n.JsonType)(String)],s.prototype,"Href",void 0),o([(0,n.JsonProperty)("title"),(0,n.JsonType)(String)],s.prototype,"Title",void 0),o([(0,n.JsonProperty)("panels"),(0,n.JsonElementType)(i.default)],s.prototype,"Panels",void 0),e.default=s},5819:function(t,e,r){"use strict";var o=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(i<3?n(s):i>3?n(e,r,s):n(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(e,"__esModule",{value:!0});const n=r(6395),i=r(8850);class s{get SizeInfo(){const t=this.Fragment;if(!t)return null;const e=/#xywh=([\d]+),([\d]+),([\d]+),([\d]+)/.exec(t);if(!e)return null;const[,r,o,n,i]=e.map((t=>Number(t)));return{x:r,y:o,width:n,height:i}}get Width(){var t;return null===(t=this.SizeInfo)||void 0===t?void 0:t.width}get Height(){var t;return null===(t=this.SizeInfo)||void 0===t?void 0:t.height}get X(){var t;return null===(t=this.SizeInfo)||void 0===t?void 0:t.x}get Y(){var t;return null===(t=this.SizeInfo)||void 0===t?void 0:t.y}}o([(0,i.JsonProperty)("title"),(0,i.JsonType)(String)],s.prototype,"Title",void 0),o([(0,i.JsonProperty)("audio"),(0,i.JsonType)(String)],s.prototype,"Audio",void 0),o([(0,i.JsonProperty)("fragment"),(0,i.JsonType)(String)],s.prototype,"Fragment",void 0),o([(0,i.JsonProperty)("texts"),(0,i.JsonElementType)(n.default)],s.prototype,"Texts",void 0),e.default=s},6395:function(t,e,r){"use strict";var o=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(i<3?n(s):i>3?n(e,r,s):n(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(e,"__esModule",{value:!0});const n=r(8850);class i{}o([(0,n.JsonProperty)("clip-path"),(0,n.JsonType)(String)],i.prototype,"ClipPath",void 0),o([(0,n.JsonProperty)("text"),(0,n.JsonType)(String)],i.prototype,"Text",void 0),o([(0,n.JsonProperty)("fragment"),(0,n.JsonType)(String)],i.prototype,"Fragment",void 0),o([(0,n.JsonProperty)("audioFragment"),(0,n.JsonType)(String)],i.prototype,"AudioFragment",void 0),o([(0,n.JsonProperty)("type"),(0,n.JsonType)(String)],i.prototype,"Type",void 0),e.default=i},9779:function(t,e,r){"use strict";var o=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(i<3?n(s):i>3?n(e,r,s):n(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(e,"__esModule",{value:!0});const n=r(8850);class i{}o([(0,n.JsonProperty)("text"),(0,n.JsonType)(String)],i.prototype,"text",void 0),o([(0,n.JsonProperty)("imgref"),(0,n.JsonType)(String)],i.prototype,"imageRef",void 0),o([(0,n.JsonProperty)("audioref"),(0,n.JsonType)(String)],i.prototype,"audioRef",void 0),e.default=i},4581:function(t,e,r){"use strict";var o=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(i<3?n(s):i>3?n(e,r,s):n(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(e,"__esModule",{value:!0});const n=r(8850),i=r(9779);class s{get audioFile(){const t=this.audioRef;if(!t)return;const e=new URL(t);return e.hash="",e.href}get textFile(){const t=this.textRef;if(!t)return;const e=new URL(t);return e.hash="",e.href}get textFragment(){const t=this.textRef;if(t)return new URL(t).hash}get imageFile(){const t=this.imageRef;if(!t)return;const e=new URL(t);return e.hash="",e.href}get sizeInfo(){const t=this.imageRef;if(!t)return;const e=new URL(t).hash;if(!e)return;const r=/#xywh=(percent:)?([\d]+),([\d]+),([\d]+),([\d]+)/.exec(e);if(!r)return;const[,,o,n,i,s]=r.map((t=>Number(t)));return{x:o,y:n,width:i,height:s,isPercent:"percent:"===r[1]}}get clipPath(){const t=this.imageRef;if(!t)return;const e="#xyn=percent:",r=t.indexOf(e);if(-1===r)return;const o=t.substring(r+e.length).split(",").map((t=>`${t}%`));if(o.length%2!=0)return;const n=new Array;for(let t=0;t<o.length;t+=2){const e=o[t],r=o[t+1];n.push(`${e} ${r}`)}return`polygon(${n.join(",")})`}get audioDuration(){var t;return null===(t=this.audioStartEnd)||void 0===t?void 0:t.duration}get audioStart(){var t;return null===(t=this.audioStartEnd)||void 0===t?void 0:t.start}get audioEnd(){var t;return null===(t=this.audioStartEnd)||void 0===t?void 0:t.end}get audioStartEnd(){const t=this.audioRef;if(!t)return;const e=new URL(t),r=/#t=([0-9]+(\.[0-9]+)?)?,([0-9]+(\.[0-9]+)?)/.exec(e.hash);if(!r)throw new Error(t);const o=r[1],n=r[3];return{start:Number(o),end:Number(n),duration:Number(n)-Number(o)}}hasRole(t){var e;return!!(null===(e=this.role)||void 0===e?void 0:e.includes(t))}}o([(0,n.JsonProperty)("description"),(0,n.JsonType)(i.default)],s.prototype,"description",void 0),o([(0,n.JsonProperty)("text"),(0,n.JsonType)(String)],s.prototype,"text",void 0),o([(0,n.JsonProperty)("audioref"),(0,n.JsonType)(String)],s.prototype,"audioRef",void 0),o([(0,n.JsonProperty)("textref"),(0,n.JsonType)(String)],s.prototype,"textRef",void 0),o([(0,n.JsonProperty)("imgref"),(0,n.JsonType)(String)],s.prototype,"imageRef",void 0),o([(0,n.JsonProperty)("role"),(0,n.JsonElementType)(String)],s.prototype,"role",void 0),o([(0,n.JsonProperty)("children"),(0,n.JsonElementType)(s)],s.prototype,"children",void 0),e.default=s},5684:function(t,e,r){"use strict";var o=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(i<3?n(s):i>3?n(e,r,s):n(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(e,"__esModule",{value:!0});const n=r(6e3),i=r(4769),s=r(8850);class a extends n.Publication{constructor(){super(...arguments),this.GuidedNavigation=[]}}o([(0,s.JsonProperty)("guided"),(0,s.JsonElementType)(i.Link)],a.prototype,"GuidedNavigation",void 0),e.default=a},4517:function(t,e,r){"use strict";var o=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(i<3?n(s):i>3?n(e,r,s):n(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(e,"__esModule",{value:!0});const n=r(7677),i=r(5595),s=r(9455);let a=class extends n.LitElement{constructor(){super(...arguments),this.canGoBack=!1,this.canGoForward=!1,this.currentPageNumber=0,this.numberOfPages=0,this.isPlaying=!1,this.showCaption=!1,this.highlightBalloon=!1,this.infoBoxOpen=!1,this.tocOpen=!1,this._positionChangedEvent=()=>{var t,e,r,o,n,i,s,a,l,c,u;this.canGoBack=!!(null===(t=this.divinaEl)||void 0===t?void 0:t.canGoBack),this.canGoForward=!!(null===(e=this.divinaEl)||void 0===e?void 0:e.canGoForward),this.currentPageNumber=null!==(o=null===(r=this.divinaEl)||void 0===r?void 0:r.currentPageNumber)&&void 0!==o?o:0,this.numberOfPages=null!==(i=null===(n=this.divinaEl)||void 0===n?void 0:n.numberOfPages)&&void 0!==i?i:0,this.isPlaying=!!(null===(s=this.divinaEl)||void 0===s?void 0:s.isPlaying),this.spine=null===(a=this.divinaEl)||void 0===a?void 0:a.spine,this.currentSpineItem=null===(l=this.divinaEl)||void 0===l?void 0:l.currentSpineItem,this.currentTime=null===(c=this.divinaEl)||void 0===c?void 0:c.currentTime,this.duration=null===(u=this.divinaEl)||void 0===u?void 0:u.duration},this._goBackEvent=()=>{var t;return null===(t=this.divinaEl)||void 0===t?void 0:t.GoBack()},this._goForwardEvent=()=>{var t;return null===(t=this.divinaEl)||void 0===t?void 0:t.GoForward()},this._toggleShowCaptionEvent=()=>{this.showCaption=!this.showCaption,this.requestUpdate()},this._toggleHighlightBalloonsEvent=()=>{this.highlightBalloon=!this.highlightBalloon,this.requestUpdate()},this._toggleTOCEvent=()=>{this.tocOpen=!this.tocOpen,this.requestUpdate()},this._toggleInfoBoxEvent=()=>{this.infoBoxOpen=!this.infoBoxOpen,this.requestUpdate()},this._play=()=>{var t;return null===(t=this.divinaEl)||void 0===t?void 0:t.play()},this._pause=()=>{var t;return null===(t=this.divinaEl)||void 0===t?void 0:t.pause()},this._onWindowResize=()=>this.requestUpdate()}buttonControlClasses(t,e){return(0,s.classMap)({disabled:!t,[e]:!0})}_renderBook(){return n.html`<divian-navigator
      id="divina"
      show-caption=${this.showCaption}
      highlight-balloon=${this.highlightBalloon}
      @position-changed="${this._positionChangedEvent}"
      manifest="${"/divian/books/nofret-gravroeverne/manifest.json"}"
    ></divian-navigator>`}_renderControlButton(t,e,r,o){return n.html`
      <div class="${(0,s.classMap)({"ui-icon":!0,disabled:!e,[`ui-icon-${o}`]:!0})}" role="button" @click="${t}">
        <i class="${this.buttonControlClasses(e,o)}" title="${r}"></i>
      </div>
    `}_renderControls(){var t,e,r,o;return n.html`
      <nav class="book-controls">
        <!-- Go back button -->
        ${this._renderControlButton(this._goBackEvent,this.canGoBack,"Go back","icofont-ui-previous")}

        <!-- play / pause button -->
        ${this._renderPlayPauseButtons()}

        <!-- Go Forward button -->
        ${this._renderControlButton(this._goForwardEvent,this.canGoForward,"Go forward","icofont-ui-next")}

        <div class="nav-idx" title="Page ${null!==(t=this.currentPageNumber)&&void 0!==t?t:0} / ${null!==(e=this.numberOfPages)&&void 0!==e?e:0}">
          <span>Page ${null!==(r=this.currentPageNumber)&&void 0!==r?r:0} / ${null!==(o=this.numberOfPages)&&void 0!==o?o:0}</span>
        </div>

        ${this._renderControlButton(this._toggleShowCaptionEvent,this.showCaption,"Toggle caption","icofont-ui-text-chat")}
        ${this._renderControlButton(this._toggleHighlightBalloonsEvent,this.highlightBalloon,"Toggle balloon highlighting","icofont-speech-comments")}
        ${this._renderProgressBar()}

        <!-- menus -->
        <div class="menus">
          ${this._renderControlButton(this._toggleTOCEvent,this.tocOpen,"Open Table of Content","icofont-navigation-menu")}
          ${this._renderControlButton(this._toggleInfoBoxEvent,this.infoBoxOpen,"Open information box","icofont-info-square")}
        </div>
      </nav>
    `}_formatTime(t,e=!0){if(Number.isNaN(t))return"00:00";const r=Math.floor(t/3600),o=Math.floor((t-60*r)/60),n=Math.floor(t%60),i=(r>0?[r,o,n]:[o,n]).map((t=>`000${t}`.slice(-2))).join(":");if(e){return`${i}.${(t-Math.floor(t)+"000").slice(2,5)}`}return i}_renderProgressBar(){var t,e,r,o;const i=this._formatTime(null!==(t=this.currentTime)&&void 0!==t?t:0),s=this._formatTime(Math.ceil(null!==(e=this.duration)&&void 0!==e?e:0),!1),a=(null!==(r=this.currentTime)&&void 0!==r?r:0)/(null!==(o=this.duration)&&void 0!==o?o:1)*100;return n.html`
      <div class="progress-container">
        <div class="time-box" title="Current time: ${i}">${i}</div>
        <div class="progress-bar">
          <progress value="${a}" max="100"></progress>
        </div>
        <div class="time-box" title="Duration ${s}">${s}</div>
      </div>
    `}_renderPlayPauseButtons(){let t=this._play,e="Play",r="icofont-ui-play";return this.isPlaying&&(t=this._pause,e="Pause",r="icofont-ui-pause"),n.html`${this._renderControlButton(t,!0,e,r)}`}_renderInfoSideMenu(){return this.infoBoxOpen?this._renderSideMenu(n.html`
        <section class="side-bar-info-text">
          <p>This is a demo of the WebPublication profile for Digital Visual Audible Narratives (<em>DiViAN</em>).</p>
          <p>This particular comic "Nofret: Gravrverne" is from <a href="https://nota.dk">Nota's</a> free collection.</p>
          The full Divian profile can be found <a href="/divian" target="_blank">her</a>.
        </section>
      `,this._toggleInfoBoxEvent):n.nothing}_renderTOCSideMenu(){if(!this.tocOpen)return n.nothing;const t=this.spine;if(!t)return n.nothing;const e=this.currentSpineItem;return e?this._renderSideMenu(n.html`${t.map(((t,r)=>n.html`<div
            role="button"
            tabindex=${r}
            aria-pressed="false"
            class="${(0,s.classMap)({"side-menu-toc-item":!0,active:t===e})}"
            @click="${()=>{var e;return null===(e=this.divinaEl)||void 0===e?void 0:e.goToSpineItem(t)}}"
          >
            ${t.Title}
          </div>`))}`,this._toggleTOCEvent):n.nothing}_renderSideMenu(t,e){return n.html`
      <aside class="side-menu">
        <div><i class="icofont-close" title="Close" @click="${e}"></i></div>
        <div class="side-menu-content">${t}</div>
      </aside>
    `}render(){return n.html`
      <!-- Workaround to make icofonts work inside the shadow dom. -->
      <link href="/divian/assets/icofont/icofont.min.css" rel="stylesheet" />

      ${this._renderControls()}

      <section class="content-viewer">${this._renderBook()}</section>

      <!-- Info sidebar box -->
      ${this._renderInfoSideMenu()}

      <!-- TOC sidebar box -->
      ${this._renderTOCSideMenu()}
    `}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this._onWindowResize)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this._onWindowResize)}};a.styles=n.css`
    :host {
      display: flex;
      flex-direction: column;
      height: 100vh;
      --background-color: #212121;
    }

    .book-controls {
      display: flex;
      flex-direction: row;
      background-color: var(--background-color);
      height: 50px;
      padding: 0.2em;
    }

    .book-controls :is(.nav-idx, .ui-icon, .progress-container) {
      line-height: calc(50px - 0.2em * 2);
      margin: 0 2em;
    }

    .book-controls .progress-container {
      display: flex;
      flex-grow: 1;
      flex-direction: row;

      color: white;
    }

    .book-controls .progress-container .progress-bar {
      flex-grow: 1;
      margin: 0 1em;
    }

    .book-controls .progress-container .progress-bar progress {
      width: 100%;
    }

    .book-controls > .nav-idx > span {
      display: inline-block;
      vertical-align: middle;
      line-height: normal;
      color: white;
      font-weight: bolder;
    }

    .book-controls .ui-icon {
      margin: 0 0.2em;
      display: inline-block;
    }

    .book-controls > .menus {
      flex: 1;
      justify-content: flex-end;
      display: flex;
    }

    .book-controls .ui-icon :is(.icofont-ui-text-chat, .icofont-speech-comments, .icofont-navigation-menu, .icofont-info-square).disabled {
      background-color: var(--background-color);
      color: white;
      cursor: pointer;
      opacity: 1;
    }

    .book-controls .ui-icon i {
      cursor: pointer;
      display: inline-block;
      background-color: grey;
      padding: 1em;
      border-radius: 1.5em;
    }

    .ui-icon.disabled {
      opacity: 0.5;
    }

    .ui-icon.disabled,
    .ui-icon.disabled i {
      cursor: not-allowed;
    }

    .content-viewer {
      flex-grow: 1;
      flex-shrink: 0;
      overflow: hidden;
      display: flex;
      border-bottom: 0.8em solid var(--background-color);
    }

    .content-viewer divian-navigator {
      flex-grow: 1;
    }

    .side-menu {
      position: absolute;
      background-color: var(--background-color);
      color: white;
      border-left: 1px solid grey;
      top: 0;
      bottom: 0;
      right: 0;
      width: 300px;
      height: 100vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .side-menu .icofont-close {
      font-size: 2em;
      cursor: pointer;
    }

    .side-menu .side-menu-content {
      flex-shrink: 1;
      flex-grow: 1;
      padding: 0.2em;
      overflow-x: hidden;
      overflow-y: auto;
    }

    .side-menu-toc-item {
      padding: 0.8em 0.2em;
      margin: 0;
      cursor: pointer;
      white-space: nowrap;

      --item-background-color: --background-color;
      --item-text-color: white;

      background-color: var(--item-background-color);
      color: var(--item-text-color);
    }

    .side-menu-toc-item:hover {
      --item-text-color: var(--background-color);
      --item-background-color: white;
      opacity: 0.8;
      font-weight: bolder;
    }

    .side-menu-toc-item.active {
      --item-text-color: var(--background-color);
      --item-background-color: white;
    }

    .side-menu .side-bar-info-text {
      font-size: 1.2em;
    }

    .side-menu .side-bar-info-text a {
      color: white;
      font-weight: bold;
      text-decoration: underline;
    }
  `,o([(0,i.property)()],a.prototype,"canGoBack",void 0),o([(0,i.property)()],a.prototype,"canGoForward",void 0),o([(0,i.property)()],a.prototype,"currentPageNumber",void 0),o([(0,i.property)()],a.prototype,"numberOfPages",void 0),o([(0,i.property)()],a.prototype,"isPlaying",void 0),o([(0,i.property)()],a.prototype,"showCaption",void 0),o([(0,i.property)()],a.prototype,"highlightBalloon",void 0),o([(0,i.property)()],a.prototype,"infoBoxOpen",void 0),o([(0,i.property)()],a.prototype,"tocOpen",void 0),o([(0,i.property)()],a.prototype,"spine",void 0),o([(0,i.property)()],a.prototype,"currentSpineItem",void 0),o([(0,i.property)()],a.prototype,"duration",void 0),o([(0,i.property)()],a.prototype,"currentTime",void 0),o([(0,i.query)("#divina")],a.prototype,"divinaEl",void 0),a=o([(0,i.customElement)("divian-player")],a),e.default=a},6211:function(t,e,r){"use strict";var o=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(i<3?n(s):i>3?n(e,r,s):n(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(e,"__esModule",{value:!0});const n=r(7677),i=r(5595),s=r(9455);let a=class extends n.LitElement{constructor(){super(...arguments),this.canGoBack=!1,this.canGoForward=!1,this.currentPageNumber=0,this.numberOfPages=0,this.isPlaying=!1,this.showCaption=!0,this.highlightBalloon=!0,this.blackWhiteRendering=!1,this.infoBoxOpen=!1,this.tocOpen=!1,this._positionChangedEvent=()=>{var t,e,r,o,n,i,s,a,l,c,u;this.canGoBack=!!(null===(t=this.syncMediaEl)||void 0===t?void 0:t.canGoBack),this.canGoForward=!!(null===(e=this.syncMediaEl)||void 0===e?void 0:e.canGoForward),this.currentPageNumber=null!==(o=null===(r=this.syncMediaEl)||void 0===r?void 0:r.currentPageNumber)&&void 0!==o?o:0,this.numberOfPages=null!==(i=null===(n=this.syncMediaEl)||void 0===n?void 0:n.numberOfPages)&&void 0!==i?i:0,this.isPlaying=!!(null===(s=this.syncMediaEl)||void 0===s?void 0:s.isPlaying),this.spine=null===(a=this.syncMediaEl)||void 0===a?void 0:a.spine,this.currentSpineItem=null===(l=this.syncMediaEl)||void 0===l?void 0:l.currentSpineItem,this.currentTime=null===(c=this.syncMediaEl)||void 0===c?void 0:c.currentTime,this.duration=null===(u=this.syncMediaEl)||void 0===u?void 0:u.duration},this._goBackEvent=()=>{var t;return null===(t=this.syncMediaEl)||void 0===t?void 0:t.GoBack()},this._goForwardEvent=()=>{var t;return null===(t=this.syncMediaEl)||void 0===t?void 0:t.GoForward()},this._toggleShowCaptionEvent=()=>{this.showCaption=!this.showCaption,this.requestUpdate()},this._toggleHighlightBalloonsEvent=()=>{this.highlightBalloon=!this.highlightBalloon,this.requestUpdate()},this._toggleBlackWhiteRenderingEvent=()=>{this.blackWhiteRendering=!this.blackWhiteRendering,this.requestUpdate()},this._toggleTOCEvent=()=>{this.tocOpen=!this.tocOpen,this.requestUpdate()},this._toggleInfoBoxEvent=()=>{this.infoBoxOpen=!this.infoBoxOpen,this.requestUpdate()},this._play=()=>{var t;return null===(t=this.syncMediaEl)||void 0===t?void 0:t.play()},this._pause=()=>{var t;return null===(t=this.syncMediaEl)||void 0===t?void 0:t.pause()},this._onWindowResize=()=>this.requestUpdate()}buttonControlClasses(t,e){return(0,s.classMap)({disabled:!t,[e]:!0})}_renderBook(){return n.html`<guided-publication-navigator
      id="syncMedia"
      show-caption=${this.showCaption}
      highlight-balloon=${this.highlightBalloon}
      black-white-rendering=${this.blackWhiteRendering}
      @position-changed="${this._positionChangedEvent}"
      manifest="${"/divian/books/nofret-gravroeverne/guided-manifest.json"}"
    ></guided-publication-navigator>`}_renderControlButton(t,e,r,o){return n.html`
      <div class="${(0,s.classMap)({"ui-icon":!0,disabled:!e,[`ui-icon-${o}`]:!0})}" role="button" @click="${t}">
        <i class="${this.buttonControlClasses(e,o)}" title="${r}"></i>
      </div>
    `}_renderControls(){var t,e,r,o;return n.html`
      <nav class="book-controls">
        <!-- Go back button -->
        ${this._renderControlButton(this._goBackEvent,this.canGoBack,"Go back","icofont-ui-previous")}

        <!-- play / pause button -->
        ${this._renderPlayPauseButtons()}

        <!-- Go Forward button -->
        ${this._renderControlButton(this._goForwardEvent,this.canGoForward,"Go forward","icofont-ui-next")}

        <div class="nav-idx" title="Page ${null!==(t=this.currentPageNumber)&&void 0!==t?t:0} / ${null!==(e=this.numberOfPages)&&void 0!==e?e:0}">
          <span>Page ${null!==(r=this.currentPageNumber)&&void 0!==r?r:0} / ${null!==(o=this.numberOfPages)&&void 0!==o?o:0}</span>
        </div>

        ${this._renderControlButton(this._toggleShowCaptionEvent,this.showCaption,"Toggle caption","icofont-ui-text-chat")}
        ${this._renderControlButton(this._toggleHighlightBalloonsEvent,this.highlightBalloon,"Toggle balloon highlighting","icofont-speech-comments")}
        ${this._renderControlButton(this._toggleBlackWhiteRenderingEvent,!this.blackWhiteRendering,"Toggle black white rendering","icofont-color-bucket")}
        ${this._renderProgressBar()}

        <!-- menus -->
        <div class="menus">
          ${this._renderControlButton(this._toggleTOCEvent,this.tocOpen,"Open Table of Content","icofont-navigation-menu")}
          ${this._renderControlButton(this._toggleInfoBoxEvent,this.infoBoxOpen,"Open information box","icofont-info-square")}
        </div>
      </nav>
    `}_formatTime(t,e=!0){if(Number.isNaN(t))return"00:00";const r=Math.floor(t/3600),o=Math.floor((t-60*r)/60),n=Math.floor(t%60),i=(r>0?[r,o,n]:[o,n]).map((t=>`000${t}`.slice(-2))).join(":");if(e){return`${i}.${(t-Math.floor(t)+"000").slice(2,5)}`}return i}_renderProgressBar(){var t,e,r,o;const i=this._formatTime(null!==(t=this.currentTime)&&void 0!==t?t:0),s=this._formatTime(Math.ceil(null!==(e=this.duration)&&void 0!==e?e:0),!1),a=(null!==(r=this.currentTime)&&void 0!==r?r:0)/(null!==(o=this.duration)&&void 0!==o?o:1)*100;return n.html`
      <div class="progress-container">
        <div class="time-box" title="Current time: ${i}">${i}</div>
        <div class="progress-bar">
          <progress value="${a}" max="100"></progress>
        </div>
        <div class="time-box" title="Duration ${s}">${s}</div>
      </div>
    `}_renderPlayPauseButtons(){let t=this._play,e="Play",r="icofont-ui-play";return this.isPlaying&&(t=this._pause,e="Pause",r="icofont-ui-pause"),n.html`${this._renderControlButton(t,!0,e,r)}`}_renderInfoSideMenu(){return this.infoBoxOpen?this._renderSideMenu(n.html`
        <section class="side-bar-info-text">
          <p>This is a demo of Readium WebPublication with Guided navigation.</p>
          <p>This particular comic "Nofret: Gravrverne" is from <a href="https://nota.dk">Nota's</a> free collection.</p>
          The proposed Guided navigation profile can be found <a href="https://github.com/readium/architecture/pull/181/files" target="_blank">her</a>.
        </section>
      `,this._toggleInfoBoxEvent):n.nothing}_renderTOCSideMenu(){if(!this.tocOpen)return n.nothing;const t=this.spine;if(!t)return n.nothing;const e=this.currentSpineItem;return e?this._renderSideMenu(n.html`${t.map(((t,r)=>n.html`<div
            role="button"
            tabindex=${r}
            aria-pressed="false"
            class="${(0,s.classMap)({"side-menu-toc-item":!0,active:t===e})}"
            @click="${()=>{var e;return null===(e=this.syncMediaEl)||void 0===e?void 0:e.goToSpineItem(t)}}"
          >
            ${t.Title}
          </div>`))}`,this._toggleTOCEvent):n.nothing}_renderSideMenu(t,e){return n.html`
      <aside class="side-menu">
        <div><i class="icofont-close" title="Close" @click="${e}"></i></div>
        <div class="side-menu-content">${t}</div>
      </aside>
    `}render(){return n.html`
      <!-- Workaround to make icofonts work inside the shadow dom. -->
      <link href="/divian/assets/icofont/icofont.min.css" rel="stylesheet" />

      ${this._renderControls()}

      <section class="content-viewer">${this._renderBook()}</section>

      <!-- Info sidebar box -->
      ${this._renderInfoSideMenu()}

      <!-- TOC sidebar box -->
      ${this._renderTOCSideMenu()}
    `}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this._onWindowResize)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this._onWindowResize)}};a.styles=n.css`
    :host {
      display: flex;
      flex-direction: column;
      height: 100vh;
      --background-color: #212121;
    }

    .book-controls {
      display: flex;
      flex-direction: row;
      background-color: var(--background-color);
      height: 50px;
      padding: 0.2em;
    }

    .book-controls :is(.nav-idx, .ui-icon, .progress-container) {
      line-height: calc(50px - 0.2em * 2);
      margin: 0 2em;
    }

    .book-controls .progress-container {
      display: flex;
      flex-grow: 1;
      flex-direction: row;

      color: white;
    }

    .book-controls .progress-container .progress-bar {
      flex-grow: 1;
      margin: 0 1em;
    }

    .book-controls .progress-container .progress-bar progress {
      width: 100%;
    }

    .book-controls > .nav-idx > span {
      display: inline-block;
      vertical-align: middle;
      line-height: normal;
      color: white;
      font-weight: bolder;
    }

    .book-controls .ui-icon {
      margin: 0 0.2em;
      display: inline-block;
    }

    .book-controls > .menus {
      flex: 1;
      justify-content: flex-end;
      display: flex;
    }

    .book-controls
      .ui-icon
      :is(.icofont-ui-text-chat, .icofont-speech-comments, .icofont-navigation-menu, .icofont-info-square, .icofont-color-bucket).disabled {
      background-color: var(--background-color);
      color: white;
      cursor: pointer;
      opacity: 1;
    }

    .book-controls .ui-icon i {
      cursor: pointer;
      display: inline-block;
      background-color: grey;
      padding: 1em;
      border-radius: 1.5em;
    }

    .ui-icon.disabled {
      opacity: 0.5;
    }

    .ui-icon.disabled,
    .ui-icon.disabled i {
      cursor: not-allowed;
    }

    .content-viewer {
      flex-grow: 1;
      flex-shrink: 0;
      overflow: hidden;
      display: flex;
      border-bottom: 0.8em solid var(--background-color);
    }

    .content-viewer guided-publication-navigator {
      flex-grow: 1;
    }

    .side-menu {
      position: absolute;
      background-color: var(--background-color);
      color: white;
      border-left: 1px solid grey;
      top: 0;
      bottom: 0;
      right: 0;
      width: 300px;
      height: 100vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .side-menu .icofont-close {
      font-size: 2em;
      cursor: pointer;
    }

    .side-menu .side-menu-content {
      flex-shrink: 1;
      flex-grow: 1;
      padding: 0.2em;
      overflow-x: hidden;
      overflow-y: auto;
    }

    .side-menu-toc-item {
      padding: 0.8em 0.2em;
      margin: 0;
      cursor: pointer;
      white-space: nowrap;

      --item-background-color: --background-color;
      --item-text-color: white;

      background-color: var(--item-background-color);
      color: var(--item-text-color);
    }

    .side-menu-toc-item:hover {
      --item-text-color: var(--background-color);
      --item-background-color: white;
      opacity: 0.8;
      font-weight: bolder;
    }

    .side-menu-toc-item.active {
      --item-text-color: var(--background-color);
      --item-background-color: white;
    }

    .side-menu .side-bar-info-text {
      font-size: 1.2em;
    }

    .side-menu .side-bar-info-text a {
      color: white;
      font-weight: bold;
      text-decoration: underline;
    }
  `,o([(0,i.property)()],a.prototype,"canGoBack",void 0),o([(0,i.property)()],a.prototype,"canGoForward",void 0),o([(0,i.property)()],a.prototype,"currentPageNumber",void 0),o([(0,i.property)()],a.prototype,"numberOfPages",void 0),o([(0,i.property)()],a.prototype,"isPlaying",void 0),o([(0,i.property)()],a.prototype,"showCaption",void 0),o([(0,i.property)()],a.prototype,"highlightBalloon",void 0),o([(0,i.property)()],a.prototype,"blackWhiteRendering",void 0),o([(0,i.property)()],a.prototype,"infoBoxOpen",void 0),o([(0,i.property)()],a.prototype,"tocOpen",void 0),o([(0,i.property)()],a.prototype,"spine",void 0),o([(0,i.property)()],a.prototype,"currentSpineItem",void 0),o([(0,i.property)()],a.prototype,"duration",void 0),o([(0,i.property)()],a.prototype,"currentTime",void 0),o([(0,i.query)("#syncMedia")],a.prototype,"syncMediaEl",void 0),a=o([(0,i.customElement)("guided-media-player")],a),e.default=a},655:(t,e,r)=>{"use strict";r.r(e),r.d(e,{__assign:()=>i,__asyncDelegator:()=>w,__asyncGenerator:()=>b,__asyncValues:()=>P,__await:()=>m,__awaiter:()=>u,__classPrivateFieldGet:()=>x,__classPrivateFieldIn:()=>T,__classPrivateFieldSet:()=>E,__createBinding:()=>p,__decorate:()=>a,__exportStar:()=>h,__extends:()=>n,__generator:()=>d,__importDefault:()=>O,__importStar:()=>C,__makeTemplateObject:()=>S,__metadata:()=>c,__param:()=>l,__read:()=>y,__rest:()=>s,__spread:()=>g,__spreadArray:()=>_,__spreadArrays:()=>v,__values:()=>f});var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},o(t,e)};function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var i=function(){return i=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},i.apply(this,arguments)};function s(t,e){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(r[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(t);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(r[o[n]]=t[o[n]])}return r}function a(t,e,r,o){var n,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(i<3?n(s):i>3?n(e,r,s):n(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function l(t,e){return function(r,o){e(r,o,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t,e,r,o){return new(r||(r=Promise))((function(n,i){function s(t){try{l(o.next(t))}catch(t){i(t)}}function a(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))}function d(t,e){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(l){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(r=1,o&&(n=2&a[0]?o.return:a[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,a[1])).done)return n;switch(o=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(n=s.trys,(n=n.length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){s.label=a[1];break}if(6===a[0]&&s.label<n[1]){s.label=n[1],n=a;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(a);break}n[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{r=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var p=Object.create?function(t,e,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(e,r);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,o,n)}:function(t,e,r,o){void 0===o&&(o=r),t[o]=e[r]};function h(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||p(e,t,r)}function f(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],o=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var o,n,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(y(arguments[e]));return t}function v(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var o=Array(t),n=0;for(e=0;e<r;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,n++)o[n]=i[s];return o}function _(t,e,r){if(r||2===arguments.length)for(var o,n=0,i=e.length;n<i;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function b(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,n=r.apply(t,e||[]),i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(t){n[t]&&(o[t]=function(e){return new Promise((function(r,o){i.push([t,e,r,o])>1||a(t,e)}))})}function a(t,e){try{(r=n[t](e)).value instanceof m?Promise.resolve(r.value.v).then(l,c):u(i[0][2],r)}catch(t){u(i[0][3],t)}var r}function l(t){a("next",t)}function c(t){a("throw",t)}function u(t,e){t(e),i.shift(),i.length&&a(i[0][0],i[0][1])}}function w(t){var e,r;return e={},o("next"),o("throw",(function(t){throw t})),o("return"),e[Symbol.iterator]=function(){return this},e;function o(o,n){e[o]=t[o]?function(e){return(r=!r)?{value:m(t[o](e)),done:"return"===o}:n?n(e):e}:n}}function P(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=f(t),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(r){e[r]=t[r]&&function(e){return new Promise((function(o,n){(function(t,e,r,o){Promise.resolve(o).then((function(e){t({value:e,done:r})}),e)})(o,n,(e=t[r](e)).done,e.value)}))}}}function S(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var A=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function C(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&p(e,t,r);return A(e,t),e}function O(t){return t&&t.__esModule?t:{default:t}}function x(t,e,r,o){if("a"===r&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?o:"a"===r?o.call(t):o?o.value:e.get(t)}function E(t,e,r,o,n){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?n.call(t,r):n?n.value=r:e.set(t,r),r}function T(t,e){if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?e===t:t.has(e)}},384:t=>{t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},5955:(t,e,r)=>{"use strict";var o=r(2584),n=r(8662),i=r(6430),s=r(5692);function a(t){return t.call.bind(t)}var l="undefined"!=typeof BigInt,c="undefined"!=typeof Symbol,u=a(Object.prototype.toString),d=a(Number.prototype.valueOf),p=a(String.prototype.valueOf),h=a(Boolean.prototype.valueOf);if(l)var f=a(BigInt.prototype.valueOf);if(c)var y=a(Symbol.prototype.valueOf);function g(t,e){if("object"!=typeof t)return!1;try{return e(t),!0}catch(t){return!1}}function v(t){return"[object Map]"===u(t)}function _(t){return"[object Set]"===u(t)}function m(t){return"[object WeakMap]"===u(t)}function b(t){return"[object WeakSet]"===u(t)}function w(t){return"[object ArrayBuffer]"===u(t)}function P(t){return"undefined"!=typeof ArrayBuffer&&(w.working?w(t):t instanceof ArrayBuffer)}function S(t){return"[object DataView]"===u(t)}function A(t){return"undefined"!=typeof DataView&&(S.working?S(t):t instanceof DataView)}e.isArgumentsObject=o,e.isGeneratorFunction=n,e.isTypedArray=s,e.isPromise=function(t){return"undefined"!=typeof Promise&&t instanceof Promise||null!==t&&"object"==typeof t&&"function"==typeof t.then&&"function"==typeof t.catch},e.isArrayBufferView=function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):s(t)||A(t)},e.isUint8Array=function(t){return"Uint8Array"===i(t)},e.isUint8ClampedArray=function(t){return"Uint8ClampedArray"===i(t)},e.isUint16Array=function(t){return"Uint16Array"===i(t)},e.isUint32Array=function(t){return"Uint32Array"===i(t)},e.isInt8Array=function(t){return"Int8Array"===i(t)},e.isInt16Array=function(t){return"Int16Array"===i(t)},e.isInt32Array=function(t){return"Int32Array"===i(t)},e.isFloat32Array=function(t){return"Float32Array"===i(t)},e.isFloat64Array=function(t){return"Float64Array"===i(t)},e.isBigInt64Array=function(t){return"BigInt64Array"===i(t)},e.isBigUint64Array=function(t){return"BigUint64Array"===i(t)},v.working="undefined"!=typeof Map&&v(new Map),e.isMap=function(t){return"undefined"!=typeof Map&&(v.working?v(t):t instanceof Map)},_.working="undefined"!=typeof Set&&_(new Set),e.isSet=function(t){return"undefined"!=typeof Set&&(_.working?_(t):t instanceof Set)},m.working="undefined"!=typeof WeakMap&&m(new WeakMap),e.isWeakMap=function(t){return"undefined"!=typeof WeakMap&&(m.working?m(t):t instanceof WeakMap)},b.working="undefined"!=typeof WeakSet&&b(new WeakSet),e.isWeakSet=function(t){return b(t)},w.working="undefined"!=typeof ArrayBuffer&&w(new ArrayBuffer),e.isArrayBuffer=P,S.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&S(new DataView(new ArrayBuffer(1),0,1)),e.isDataView=A;var C="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function O(t){return"[object SharedArrayBuffer]"===u(t)}function x(t){return void 0!==C&&(void 0===O.working&&(O.working=O(new C)),O.working?O(t):t instanceof C)}function E(t){return g(t,d)}function T(t){return g(t,p)}function $(t){return g(t,h)}function k(t){return l&&g(t,f)}function J(t){return c&&g(t,y)}e.isSharedArrayBuffer=x,e.isAsyncFunction=function(t){return"[object AsyncFunction]"===u(t)},e.isMapIterator=function(t){return"[object Map Iterator]"===u(t)},e.isSetIterator=function(t){return"[object Set Iterator]"===u(t)},e.isGeneratorObject=function(t){return"[object Generator]"===u(t)},e.isWebAssemblyCompiledModule=function(t){return"[object WebAssembly.Module]"===u(t)},e.isNumberObject=E,e.isStringObject=T,e.isBooleanObject=$,e.isBigIntObject=k,e.isSymbolObject=J,e.isBoxedPrimitive=function(t){return E(t)||T(t)||$(t)||k(t)||J(t)},e.isAnyArrayBuffer=function(t){return"undefined"!=typeof Uint8Array&&(P(t)||x(t))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(t){Object.defineProperty(e,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})}))},9539:(t,e,r)=>{var o=r(4155),n=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},o=0;o<e.length;o++)r[e[o]]=Object.getOwnPropertyDescriptor(t,e[o]);return r},i=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(c(arguments[r]));return e.join(" ")}r=1;for(var o=arguments,n=o.length,s=String(t).replace(i,(function(t){if("%%"===t)return"%";if(r>=n)return t;switch(t){case"%s":return String(o[r++]);case"%d":return Number(o[r++]);case"%j":try{return JSON.stringify(o[r++])}catch(t){return"[Circular]"}default:return t}})),a=o[r];r<n;a=o[++r])v(a)||!P(a)?s+=" "+a:s+=" "+c(a);return s},e.deprecate=function(t,r){if(void 0!==o&&!0===o.noDeprecation)return t;if(void 0===o)return function(){return e.deprecate(t,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(o.throwDeprecation)throw new Error(r);o.traceDeprecation?console.trace(r):console.error(r),n=!0}return t.apply(this,arguments)}};var s={},a=/^$/;if(o.env.NODE_DEBUG){var l=o.env.NODE_DEBUG;l=l.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+l+"$","i")}function c(t,r){var o={seen:[],stylize:d};return arguments.length>=3&&(o.depth=arguments[2]),arguments.length>=4&&(o.colors=arguments[3]),g(r)?o.showHidden=r:r&&e._extend(o,r),b(o.showHidden)&&(o.showHidden=!1),b(o.depth)&&(o.depth=2),b(o.colors)&&(o.colors=!1),b(o.customInspect)&&(o.customInspect=!0),o.colors&&(o.stylize=u),p(o,t,o.depth)}function u(t,e){var r=c.styles[e];return r?"["+c.colors[r][0]+"m"+t+"["+c.colors[r][1]+"m":t}function d(t,e){return t}function p(t,r,o){if(t.customInspect&&r&&C(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(o,t);return m(n)||(n=p(t,n,o)),n}var i=function(t,e){if(b(e))return t.stylize("undefined","undefined");if(m(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(_(e))return t.stylize(""+e,"number");if(g(e))return t.stylize(""+e,"boolean");if(v(e))return t.stylize("null","null")}(t,r);if(i)return i;var s=Object.keys(r),a=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),A(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(r);if(0===s.length){if(C(r)){var l=r.name?": "+r.name:"";return t.stylize("[Function"+l+"]","special")}if(w(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(S(r))return t.stylize(Date.prototype.toString.call(r),"date");if(A(r))return h(r)}var c,u="",d=!1,P=["{","}"];(y(r)&&(d=!0,P=["[","]"]),C(r))&&(u=" [Function"+(r.name?": "+r.name:"")+"]");return w(r)&&(u=" "+RegExp.prototype.toString.call(r)),S(r)&&(u=" "+Date.prototype.toUTCString.call(r)),A(r)&&(u=" "+h(r)),0!==s.length||d&&0!=r.length?o<0?w(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),c=d?function(t,e,r,o,n){for(var i=[],s=0,a=e.length;s<a;++s)$(e,String(s))?i.push(f(t,e,r,o,String(s),!0)):i.push("");return n.forEach((function(n){n.match(/^\d+$/)||i.push(f(t,e,r,o,n,!0))})),i}(t,r,o,a,s):s.map((function(e){return f(t,r,o,a,e,d)})),t.seen.pop(),function(t,e,r){var o=t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(o>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(c,u,P)):P[0]+u+P[1]}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,r,o,n,i){var s,a,l;if((l=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]}).get?a=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),$(o,n)||(s="["+n+"]"),a||(t.seen.indexOf(l.value)<0?(a=v(r)?p(t,l.value,null):p(t,l.value,r-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map((function(t){return"  "+t})).join("\n").slice(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),b(s)){if(i&&n.match(/^\d+$/))return a;(s=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.slice(1,-1),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function y(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function v(t){return null===t}function _(t){return"number"==typeof t}function m(t){return"string"==typeof t}function b(t){return void 0===t}function w(t){return P(t)&&"[object RegExp]"===O(t)}function P(t){return"object"==typeof t&&null!==t}function S(t){return P(t)&&"[object Date]"===O(t)}function A(t){return P(t)&&("[object Error]"===O(t)||t instanceof Error)}function C(t){return"function"==typeof t}function O(t){return Object.prototype.toString.call(t)}function x(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(t=t.toUpperCase(),!s[t])if(a.test(t)){var r=o.pid;s[t]=function(){var o=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,o)}}else s[t]=function(){};return s[t]},e.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.types=r(5955),e.isArray=y,e.isBoolean=g,e.isNull=v,e.isNullOrUndefined=function(t){return null==t},e.isNumber=_,e.isString=m,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=b,e.isRegExp=w,e.types.isRegExp=w,e.isObject=P,e.isDate=S,e.types.isDate=S,e.isError=A,e.types.isNativeError=A,e.isFunction=C,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=r(384);var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(){var t=new Date,e=[x(t.getHours()),x(t.getMinutes()),x(t.getSeconds())].join(":");return[t.getDate(),E[t.getMonth()],e].join(" ")}function $(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",T(),e.format.apply(e,arguments))},e.inherits=r(5717),e._extend=function(t,e){if(!e||!P(e))return t;for(var r=Object.keys(e),o=r.length;o--;)t[r[o]]=e[r[o]];return t};var k="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function J(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(k&&t[k]){var e;if("function"!=typeof(e=t[k]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,k,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,o=new Promise((function(t,o){e=t,r=o})),n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);n.push((function(t,o){t?r(t):e(o)}));try{t.apply(this,n)}catch(t){r(t)}return o}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),k&&Object.defineProperty(e,k,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,n(t))},e.promisify.custom=k,e.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],r=0;r<arguments.length;r++)e.push(arguments[r]);var n=e.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var i=this,s=function(){return n.apply(i,arguments)};t.apply(this,e).then((function(t){o.nextTick(s.bind(null,null,t))}),(function(t){o.nextTick(J.bind(null,t,s))}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,n(t)),e}},6430:(t,e,r)=>{"use strict";var o=r(4029),n=r(3083),i=r(1924),s=r(7296),a=i("Object.prototype.toString"),l=r(6410)(),c="undefined"==typeof globalThis?r.g:globalThis,u=n(),d=i("String.prototype.slice"),p={},h=Object.getPrototypeOf;l&&s&&h&&o(u,(function(t){if("function"==typeof c[t]){var e=new c[t];if(Symbol.toStringTag in e){var r=h(e),o=s(r,Symbol.toStringTag);if(!o){var n=h(r);o=s(n,Symbol.toStringTag)}p[t]=o.get}}}));var f=r(5692);t.exports=function(t){return!!f(t)&&(l&&Symbol.toStringTag in t?function(t){var e=!1;return o(p,(function(r,o){if(!e)try{var n=r.call(t);n===o&&(e=n)}catch(t){}})),e}(t):d(a(t),8,-1))}},3083:(t,e,r)=>{"use strict";var o=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],n="undefined"==typeof globalThis?r.g:globalThis;t.exports=function(){for(var t=[],e=0;e<o.length;e++)"function"==typeof n[o[e]]&&(t[t.length]=o[e]);return t}},875:(t,e,r)=>{"use strict";r.d(e,{XM:()=>n,Xe:()=>i,pX:()=>o});const o={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},n=t=>(...e)=>({_$litDirective$:t,values:e});class i{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,r){this._$Ct=t,this._$AM=e,this._$Ci=r}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}},3692:(t,e,r)=>{"use strict";var o;r.d(e,{Al:()=>U,Jb:()=>C,Ld:()=>O,YP:()=>A,dy:()=>S,sY:()=>D});const n=window,i=n.trustedTypes,s=i?i.createPolicy("lit-html",{createHTML:t=>t}):void 0,a=`lit$${(Math.random()+"").slice(9)}$`,l="?"+a,c=`<${l}>`,u=document,d=(t="")=>u.createComment(t),p=t=>null===t||"object"!=typeof t&&"function"!=typeof t,h=Array.isArray,f=t=>h(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator]),y=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,g=/-->/g,v=/>/g,_=RegExp(">|[ \t\n\f\r](?:([^\\s\"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)","g"),m=/'/g,b=/"/g,w=/^(?:script|style|textarea|title)$/i,P=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),S=P(1),A=P(2),C=Symbol.for("lit-noChange"),O=Symbol.for("lit-nothing"),x=new WeakMap,E=u.createTreeWalker(u,129,null,!1),T=(t,e)=>{const r=t.length-1,o=[];let n,i=2===e?"<svg>":"",l=y;for(let e=0;e<r;e++){const r=t[e];let s,u,d=-1,p=0;for(;p<r.length&&(l.lastIndex=p,u=l.exec(r),null!==u);)p=l.lastIndex,l===y?"!--"===u[1]?l=g:void 0!==u[1]?l=v:void 0!==u[2]?(w.test(u[2])&&(n=RegExp("</"+u[2],"g")),l=_):void 0!==u[3]&&(l=_):l===_?">"===u[0]?(l=null!=n?n:y,d=-1):void 0===u[1]?d=-2:(d=l.lastIndex-u[2].length,s=u[1],l=void 0===u[3]?_:'"'===u[3]?b:m):l===b||l===m?l=_:l===g||l===v?l=y:(l=_,n=void 0);const h=l===_&&t[e+1].startsWith("/>")?" ":"";i+=l===y?r+c:d>=0?(o.push(s),r.slice(0,d)+"$lit$"+r.slice(d)+a+h):r+a+(-2===d?(o.push(void 0),e):h)}const u=i+(t[r]||"<?>")+(2===e?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==s?s.createHTML(u):u,o]};class ${constructor({strings:t,_$litType$:e},r){let o;this.parts=[];let n=0,s=0;const c=t.length-1,u=this.parts,[p,h]=T(t,e);if(this.el=$.createElement(p,r),E.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(o=E.nextNode())&&u.length<c;){if(1===o.nodeType){if(o.hasAttributes()){const t=[];for(const e of o.getAttributeNames())if(e.endsWith("$lit$")||e.startsWith(a)){const r=h[s++];if(t.push(e),void 0!==r){const t=o.getAttribute(r.toLowerCase()+"$lit$").split(a),e=/([.?@])?(.*)/.exec(r);u.push({type:1,index:n,name:e[2],strings:t,ctor:"."===e[1]?R:"?"===e[1]?M:"@"===e[1]?B:I})}else u.push({type:6,index:n})}for(const e of t)o.removeAttribute(e)}if(w.test(o.tagName)){const t=o.textContent.split(a),e=t.length-1;if(e>0){o.textContent=i?i.emptyScript:"";for(let r=0;r<e;r++)o.append(t[r],d()),E.nextNode(),u.push({type:2,index:++n});o.append(t[e],d())}}}else if(8===o.nodeType)if(o.data===l)u.push({type:2,index:n});else{let t=-1;for(;-1!==(t=o.data.indexOf(a,t+1));)u.push({type:7,index:n}),t+=a.length-1}n++}}static createElement(t,e){const r=u.createElement("template");return r.innerHTML=t,r}}function k(t,e,r=t,o){var n,i,s,a;if(e===C)return e;let l=void 0!==o?null===(n=r._$Co)||void 0===n?void 0:n[o]:r._$Cl;const c=p(e)?void 0:e._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(i=null==l?void 0:l._$AO)||void 0===i||i.call(l,!1),void 0===c?l=void 0:(l=new c(t),l._$AT(t,r,o)),void 0!==o?(null!==(s=(a=r)._$Co)&&void 0!==s?s:a._$Co=[])[o]=l:r._$Cl=l),void 0!==l&&(e=k(t,l._$AS(t,e.values),l,o)),e}class J{constructor(t,e){this.u=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(t){var e;const{el:{content:r},parts:o}=this._$AD,n=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:u).importNode(r,!0);E.currentNode=n;let i=E.nextNode(),s=0,a=0,l=o[0];for(;void 0!==l;){if(s===l.index){let e;2===l.type?e=new j(i,i.nextSibling,this,t):1===l.type?e=new l.ctor(i,l.name,l.strings,this,t):6===l.type&&(e=new N(i,this,t)),this.u.push(e),l=o[++a]}s!==(null==l?void 0:l.index)&&(i=E.nextNode(),s++)}return n}p(t){let e=0;for(const r of this.u)void 0!==r&&(void 0!==r.strings?(r._$AI(t,r,e),e+=r.strings.length-2):r._$AI(t[e])),e++}}class j{constructor(t,e,r,o){var n;this.type=2,this._$AH=O,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=r,this.options=o,this._$Cm=null===(n=null==o?void 0:o.isConnected)||void 0===n||n}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cm}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=k(this,t,e),p(t)?t===O||null==t||""===t?(this._$AH!==O&&this._$AR(),this._$AH=O):t!==this._$AH&&t!==C&&this.g(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):f(t)?this.k(t):this.g(t)}O(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}g(t){this._$AH!==O&&p(this._$AH)?this._$AA.nextSibling.data=t:this.T(u.createTextNode(t)),this._$AH=t}$(t){var e;const{values:r,_$litType$:o}=t,n="number"==typeof o?this._$AC(t):(void 0===o.el&&(o.el=$.createElement(o.h,this.options)),o);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===n)this._$AH.p(r);else{const t=new J(n,this),e=t.v(this.options);t.p(r),this.T(e),this._$AH=t}}_$AC(t){let e=x.get(t.strings);return void 0===e&&x.set(t.strings,e=new $(t)),e}k(t){h(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let r,o=0;for(const n of t)o===e.length?e.push(r=new j(this.O(d()),this.O(d()),this,this.options)):r=e[o],r._$AI(n),o++;o<e.length&&(this._$AR(r&&r._$AB.nextSibling,o),e.length=o)}_$AR(t=this._$AA.nextSibling,e){var r;for(null===(r=this._$AP)||void 0===r||r.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cm=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class I{constructor(t,e,r,o,n){this.type=1,this._$AH=O,this._$AN=void 0,this.element=t,this.name=e,this._$AM=o,this.options=n,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=O}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,r,o){const n=this.strings;let i=!1;if(void 0===n)t=k(this,t,e,0),i=!p(t)||t!==this._$AH&&t!==C,i&&(this._$AH=t);else{const o=t;let s,a;for(t=n[0],s=0;s<n.length-1;s++)a=k(this,o[r+s],e,s),a===C&&(a=this._$AH[s]),i||(i=!p(a)||a!==this._$AH[s]),a===O?t=O:t!==O&&(t+=(null!=a?a:"")+n[s+1]),this._$AH[s]=a}i&&!o&&this.j(t)}j(t){t===O?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class R extends I{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===O?void 0:t}}const F=i?i.emptyScript:"";class M extends I{constructor(){super(...arguments),this.type=4}j(t){t&&t!==O?this.element.setAttribute(this.name,F):this.element.removeAttribute(this.name)}}class B extends I{constructor(t,e,r,o,n){super(t,e,r,o,n),this.type=5}_$AI(t,e=this){var r;if((t=null!==(r=k(this,t,e,0))&&void 0!==r?r:O)===C)return;const o=this._$AH,n=t===O&&o!==O||t.capture!==o.capture||t.once!==o.once||t.passive!==o.passive,i=t!==O&&(o===O||n);n&&this.element.removeEventListener(this.name,this,o),i&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,r;"function"==typeof this._$AH?this._$AH.call(null!==(r=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==r?r:this.element,t):this._$AH.handleEvent(t)}}class N{constructor(t,e,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){k(this,t)}}const U={P:"$lit$",A:a,M:l,C:1,L:T,R:J,D:f,V:k,I:j,H:I,N:M,U:B,B:R,F:N},L=n.litHtmlPolyfillSupport;null==L||L($,j),(null!==(o=n.litHtmlVersions)&&void 0!==o?o:n.litHtmlVersions=[]).push("2.6.1");const D=(t,e,r)=>{var o,n;const i=null!==(o=null==r?void 0:r.renderBefore)&&void 0!==o?o:e;let s=i._$litPart$;if(void 0===s){const t=null!==(n=null==r?void 0:r.renderBefore)&&void 0!==n?n:null;i._$litPart$=s=new j(e.insertBefore(d(),t),t,void 0,null!=r?r:{})}return s._$AI(t),s}},5595:(t,e,r)=>{"use strict";r.r(e),r.d(e,{customElement:()=>o,eventOptions:()=>l,property:()=>i,query:()=>c,queryAll:()=>u,queryAssignedElements:()=>f,queryAssignedNodes:()=>y,queryAsync:()=>d,state:()=>s});const o=t=>e=>"function"==typeof e?((t,e)=>(customElements.define(t,e),e))(t,e):((t,e)=>{const{kind:r,elements:o}=e;return{kind:r,elements:o,finisher(e){customElements.define(t,e)}}})(t,e),n=(t,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(r){r.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}};function i(t){return(e,r)=>void 0!==r?((t,e,r)=>{e.constructor.createProperty(r,t)})(t,e,r):n(t,e)}function s(t){return i({...t,state:!0})}const a=({finisher:t,descriptor:e})=>(r,o)=>{var n;if(void 0===o){const o=null!==(n=r.originalKey)&&void 0!==n?n:r.key,i=null!=e?{kind:"method",placement:"prototype",key:o,descriptor:e(r.key)}:{...r,key:o};return null!=t&&(i.finisher=function(e){t(e,o)}),i}{const n=r.constructor;void 0!==e&&Object.defineProperty(r,o,e(o)),null==t||t(n,o)}};function l(t){return a({finisher:(e,r)=>{Object.assign(e.prototype[r],t)}})}function c(t,e){return a({descriptor:r=>{const o={get(){var e,r;return null!==(r=null===(e=this.renderRoot)||void 0===e?void 0:e.querySelector(t))&&void 0!==r?r:null},enumerable:!0,configurable:!0};if(e){const e="symbol"==typeof r?Symbol():"__"+r;o.get=function(){var r,o;return void 0===this[e]&&(this[e]=null!==(o=null===(r=this.renderRoot)||void 0===r?void 0:r.querySelector(t))&&void 0!==o?o:null),this[e]}}return o}})}function u(t){return a({descriptor:e=>({get(){var e,r;return null!==(r=null===(e=this.renderRoot)||void 0===e?void 0:e.querySelectorAll(t))&&void 0!==r?r:[]},enumerable:!0,configurable:!0})})}function d(t){return a({descriptor:e=>({async get(){var e;return await this.updateComplete,null===(e=this.renderRoot)||void 0===e?void 0:e.querySelector(t)},enumerable:!0,configurable:!0})})}var p;const h=null!=(null===(p=window.HTMLSlotElement)||void 0===p?void 0:p.prototype.assignedElements)?(t,e)=>t.assignedElements(e):(t,e)=>t.assignedNodes(e).filter((t=>t.nodeType===Node.ELEMENT_NODE));function f(t){const{slot:e,selector:r}=null!=t?t:{};return a({descriptor:o=>({get(){var o;const n="slot"+(e?`[name=${e}]`:":not([name])"),i=null===(o=this.renderRoot)||void 0===o?void 0:o.querySelector(n),s=null!=i?h(i,t):[];return r?s.filter((t=>t.matches(r))):s},enumerable:!0,configurable:!0})})}function y(t,e,r){let o,n=t;return"object"==typeof t?(n=t.slot,o=t):o={flatten:e},r?f({slot:n,flatten:e,selector:r}):a({descriptor:t=>({get(){var t,e;const r="slot"+(n?`[name=${n}]`:":not([name])"),i=null===(t=this.renderRoot)||void 0===t?void 0:t.querySelector(r);return null!==(e=null==i?void 0:i.assignedNodes(o))&&void 0!==e?e:[]},enumerable:!0,configurable:!0})})}},9455:(t,e,r)=>{"use strict";r.r(e),r.d(e,{classMap:()=>i});var o=r(3692),n=r(875);const i=(0,n.XM)(class extends n.Xe{constructor(t){var e;if(super(t),t.type!==n.pX.ATTRIBUTE||"class"!==t.name||(null===(e=t.strings)||void 0===e?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((e=>t[e])).join(" ")+" "}update(t,[e]){var r,n;if(void 0===this.nt){this.nt=new Set,void 0!==t.strings&&(this.st=new Set(t.strings.join(" ").split(/\s/).filter((t=>""!==t))));for(const t in e)e[t]&&!(null===(r=this.st)||void 0===r?void 0:r.has(t))&&this.nt.add(t);return this.render(e)}const i=t.element.classList;this.nt.forEach((t=>{t in e||(i.remove(t),this.nt.delete(t))}));for(const t in e){const r=!!e[t];r===this.nt.has(t)||(null===(n=this.st)||void 0===n?void 0:n.has(t))||(r?(i.add(t),this.nt.add(t)):(i.remove(t),this.nt.delete(t)))}return o.Jb}})},3959:(t,e,r)=>{"use strict";r.r(e),r.d(e,{styleMap:()=>i});var o=r(3692),n=r(875);const i=(0,n.XM)(class extends n.Xe{constructor(t){var e;if(super(t),t.type!==n.pX.ATTRIBUTE||"style"!==t.name||(null===(e=t.strings)||void 0===e?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,r)=>{const o=t[r];return null==o?e:e+`${r=r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${o};`}),"")}update(t,[e]){const{style:r}=t.element;if(void 0===this.vt){this.vt=new Set;for(const t in e)this.vt.add(t);return this.render(e)}this.vt.forEach((t=>{null==e[t]&&(this.vt.delete(t),t.includes("-")?r.removeProperty(t):r[t]="")}));for(const t in e){const o=e[t];null!=o&&(this.vt.add(t),t.includes("-")?r.setProperty(t,o):r[t]=o)}return o.Jb}})},7677:(t,e,r)=>{"use strict";r.r(e),r.d(e,{CSSResult:()=>a,LitElement:()=>C,ReactiveElement:()=>b,UpdatingElement:()=>A,_$LE:()=>x,_$LH:()=>S.Al,adoptStyles:()=>u,css:()=>c,defaultConverter:()=>v,getCompatibleStyle:()=>d,html:()=>S.dy,isServer:()=>E,noChange:()=>S.Jb,notEqual:()=>_,nothing:()=>S.Ld,render:()=>S.sY,supportsAdoptingStyleSheets:()=>n,svg:()=>S.YP,unsafeCSS:()=>l});const o=window,n=o.ShadowRoot&&(void 0===o.ShadyCSS||o.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,i=Symbol(),s=new WeakMap;class a{constructor(t,e,r){if(this._$cssResult$=!0,r!==i)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(n&&void 0===t){const r=void 0!==e&&1===e.length;r&&(t=s.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),r&&s.set(e,t))}return t}toString(){return this.cssText}}const l=t=>new a("string"==typeof t?t:t+"",void 0,i),c=(t,...e)=>{const r=1===t.length?t[0]:e.reduce(((e,r,o)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+t[o+1]),t[0]);return new a(r,t,i)},u=(t,e)=>{n?t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):e.forEach((e=>{const r=document.createElement("style"),n=o.litNonce;void 0!==n&&r.setAttribute("nonce",n),r.textContent=e.cssText,t.appendChild(r)}))},d=n?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const r of t.cssRules)e+=r.cssText;return l(e)})(t):t;var p;const h=window,f=h.trustedTypes,y=f?f.emptyScript:"",g=h.reactiveElementPolyfillSupport,v={toAttribute(t,e){switch(e){case Boolean:t=t?y:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=null!==t;break;case Number:r=null===t?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch(t){r=null}}return r}},_=(t,e)=>e!==t&&(e==e||t==t),m={attribute:!0,type:String,converter:v,reflect:!1,hasChanged:_};class b extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(t){var e;this.finalize(),(null!==(e=this.h)&&void 0!==e?e:this.h=[]).push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,r)=>{const o=this._$Ep(r,e);void 0!==o&&(this._$Ev.set(o,r),t.push(o))})),t}static createProperty(t,e=m){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const r="symbol"==typeof t?Symbol():"__"+t,o=this.getPropertyDescriptor(t,r,e);void 0!==o&&Object.defineProperty(this.prototype,t,o)}}static getPropertyDescriptor(t,e,r){return{get(){return this[e]},set(o){const n=this[t];this[e]=o,this.requestUpdate(t,n,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||m}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),void 0!==t.h&&(this.h=[...t.h]),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const r of e)this.createProperty(r,t[r])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const r=new Set(t.flat(1/0).reverse());for(const t of r)e.unshift(d(t))}else void 0!==t&&e.push(d(t));return e}static _$Ep(t,e){const r=e.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof t?t.toLowerCase():void 0}u(){var t;this._$E_=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(t=this.constructor.h)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,r;(null!==(e=this._$ES)&&void 0!==e?e:this._$ES=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(r=t.hostConnected)||void 0===r||r.call(t))}removeController(t){var e;null===(e=this._$ES)||void 0===e||e.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this._$Ei.set(e,this[e]),delete this[e])}))}createRenderRoot(){var t;const e=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return u(e,this.constructor.elementStyles),e}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)}))}attributeChangedCallback(t,e,r){this._$AK(t,r)}_$EO(t,e,r=m){var o;const n=this.constructor._$Ep(t,r);if(void 0!==n&&!0===r.reflect){const i=(void 0!==(null===(o=r.converter)||void 0===o?void 0:o.toAttribute)?r.converter:v).toAttribute(e,r.type);this._$El=t,null==i?this.removeAttribute(n):this.setAttribute(n,i),this._$El=null}}_$AK(t,e){var r;const o=this.constructor,n=o._$Ev.get(t);if(void 0!==n&&this._$El!==n){const t=o.getPropertyOptions(n),i="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==(null===(r=t.converter)||void 0===r?void 0:r.fromAttribute)?t.converter:v;this._$El=n,this[n]=i.fromAttribute(e,t.type),this._$El=null}}requestUpdate(t,e,r){let o=!0;void 0!==t&&(((r=r||this.constructor.getPropertyOptions(t)).hasChanged||_)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===r.reflect&&this._$El!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,r))):o=!1),!this.isUpdatePending&&o&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((t,e)=>this[e]=t)),this._$Ei=void 0);let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(r)):this._$Ek()}catch(t){throw e=!1,this._$Ek(),t}e&&this._$AE(r)}willUpdate(t){}_$AE(t){var e;null===(e=this._$ES)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,e)=>this._$EO(e,this[e],t))),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}}b.finalized=!0,b.elementProperties=new Map,b.elementStyles=[],b.shadowRootOptions={mode:"open"},null==g||g({ReactiveElement:b}),(null!==(p=h.reactiveElementVersions)&&void 0!==p?p:h.reactiveElementVersions=[]).push("1.6.1");var w,P,S=r(3692);const A=b;class C extends b{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,e;const r=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=r.firstChild),r}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=(0,S.sY)(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!1)}render(){return S.Jb}}C.finalized=!0,C._$litElement$=!0,null===(w=globalThis.litElementHydrateSupport)||void 0===w||w.call(globalThis,{LitElement:C});const O=globalThis.litElementPolyfillSupport;null==O||O({LitElement:C});const x={_$AK:(t,e,r)=>{t._$AK(e,r)},_$AL:t=>t._$AL};(null!==(P=globalThis.litElementVersions)&&void 0!==P?P:globalThis.litElementVersions=[]).push("3.2.2");const E=!1}},e={};function r(o){var n=e[o];if(void 0!==n)return n.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,r),i.exports}r.d=(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};(()=>{"use strict";var t=o;Object.defineProperty(t,"__esModule",{value:!0}),r(365),r(519),r(4517),r(5821),r(6211)})(),index=o})();